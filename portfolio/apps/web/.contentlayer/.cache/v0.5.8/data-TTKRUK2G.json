{
  "cacheItemsMap": {
    "posts/performant-3d-web.mdx": {
      "document": {
        "title": "Building Performant 3D Experiences on the Web",
        "summary": "A deep dive into optimizing Three.js applications for production, covering rendering techniques, memory management, and mobile performance.",
        "tags": [
          "WebGL",
          "Performance",
          "Three.js",
          "Tutorial"
        ],
        "publishedAt": "2024-10-15T00:00:00.000Z",
        "published": true,
        "body": {
          "raw": "\n## Introduction\n\nWebGL and Three.js have democratized 3D graphics on the web, but building performant 3D experiences that work across devices remains challenging. After shipping multiple production 3D applications, I've learned valuable lessons about optimization that I want to share.\n\n## The Performance Budget\n\nBefore diving into techniques, establish your performance budget:\n\n- **Target:** 60 FPS (16.67ms per frame)\n- **Budget breakdown:**\n  - JavaScript: 3-4ms\n  - Rendering: 8-10ms\n  - Browser work: 3-4ms\n  - Buffer: 2ms\n\nMonitor these with Chrome DevTools Performance tab.\n\n## Optimization Techniques\n\n### 1. Instanced Rendering\n\nRendering thousands of similar objects? Use `InstancedMesh`:\n\n```typescript\n// ❌ Bad: Individual meshes\nconst meshes = [];\nfor (let i = 0; i < 10000; i++) {\n  const mesh = new THREE.Mesh(geometry, material);\n  mesh.position.set(x, y, z);\n  scene.add(mesh);\n  meshes.push(mesh);\n}\n\n// ✅ Good: Instanced mesh\nconst instancedMesh = new THREE.InstancedMesh(\n  geometry,\n  material,\n  10000\n);\n\nfor (let i = 0; i < 10000; i++) {\n  matrix.setPosition(x, y, z);\n  instancedMesh.setMatrixAt(i, matrix);\n}\n\ninstancedMesh.instanceMatrix.needsUpdate = true;\nscene.add(instancedMesh);\n```\n\n**Impact:** 100x fewer draw calls, 10x faster rendering.\n\n### 2. Geometry Optimization\n\nReduce vertex count aggressively:\n\n```typescript\n// Use LOD (Level of Detail)\nconst lod = new THREE.LOD();\n\n// High detail (close)\nlod.addLevel(highPolyMesh, 0);\n\n// Medium detail\nlod.addLevel(mediumPolyMesh, 50);\n\n// Low detail (far)\nlod.addLevel(lowPolyMesh, 200);\n\nscene.add(lod);\n```\n\nAlso consider:\n- BufferGeometry instead of Geometry\n- Merge static geometries\n- Use indexed geometries\n\n### 3. Texture Atlasing\n\nCombine textures to reduce draw calls:\n\n```typescript\n// Create atlas\nconst canvas = document.createElement('canvas');\ncanvas.width = 2048;\ncanvas.height = 2048;\nconst ctx = canvas.getContext('2d')!;\n\n// Pack textures\ntextures.forEach((img, i) => {\n  ctx.drawImage(img, x, y, w, h);\n});\n\nconst atlasTexture = new THREE.CanvasTexture(canvas);\n```\n\nDon't forget to update UVs!\n\n### 4. Frustum Culling\n\nThree.js does this automatically, but you can optimize further:\n\n```typescript\n// Manual culling for custom objects\nconst frustum = new THREE.Frustum();\nconst cameraViewProjectionMatrix = new THREE.Matrix4();\n\nfunction updateFrustum() {\n  camera.updateMatrixWorld();\n  cameraViewProjectionMatrix.multiplyMatrices(\n    camera.projectionMatrix,\n    camera.matrixWorldInverse\n  );\n  frustum.setFromProjectionMatrix(cameraViewProjectionMatrix);\n}\n\nfunction isVisible(object: THREE.Object3D) {\n  return frustum.intersectsObject(object);\n}\n```\n\n### 5. Shader Optimization\n\nMove calculations to vertex shader when possible:\n\n```glsl\n// ❌ Fragment shader (runs per pixel)\nvarying vec3 vNormal;\nvoid main() {\n  vec3 light = normalize(vec3(1.0, 1.0, 1.0));\n  float intensity = max(dot(vNormal, light), 0.0);\n  gl_FragColor = vec4(vec3(intensity), 1.0);\n}\n\n// ✅ Vertex shader (runs per vertex)\nattribute vec3 normal;\nvarying float vIntensity;\nvoid main() {\n  vec3 light = normalize(vec3(1.0, 1.0, 1.0));\n  vIntensity = max(dot(normal, light), 0.0);\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n}\n```\n\n## Mobile-Specific Optimizations\n\nMobile GPUs are less powerful—adapt accordingly:\n\n```typescript\nconst isMobile = /iPhone|iPad|Android/i.test(navigator.userAgent);\n\nconst config = {\n  shadowMapEnabled: !isMobile,\n  antialias: !isMobile,\n  pixelRatio: Math.min(window.devicePixelRatio, isMobile ? 2 : 3),\n  maxParticles: isMobile ? 5000 : 50000,\n};\n\nconst renderer = new THREE.WebGLRenderer({\n  antialias: config.antialias,\n  powerPreference: 'high-performance',\n});\n\nrenderer.setPixelRatio(config.pixelRatio);\nrenderer.shadowMap.enabled = config.shadowMapEnabled;\n```\n\n## Memory Management\n\nDispose properly to avoid memory leaks:\n\n```typescript\nfunction dispose(object: THREE.Object3D) {\n  object.traverse((child) => {\n    if (child instanceof THREE.Mesh) {\n      child.geometry.dispose();\n\n      if (Array.isArray(child.material)) {\n        child.material.forEach(m => m.dispose());\n      } else {\n        child.material.dispose();\n      }\n    }\n  });\n}\n\n// Clean up on unmount\nuseEffect(() => {\n  return () => {\n    dispose(scene);\n    renderer.dispose();\n  };\n}, []);\n```\n\n## Monitoring Performance\n\nTrack metrics in production:\n\n```typescript\nconst stats = {\n  fps: 0,\n  frameTime: 0,\n  memory: 0,\n};\n\nfunction measurePerformance() {\n  const start = performance.now();\n\n  renderer.render(scene, camera);\n\n  stats.frameTime = performance.now() - start;\n  stats.fps = 1000 / stats.frameTime;\n\n  // @ts-ignore\n  stats.memory = performance.memory?.usedJSHeapSize || 0;\n\n  // Send to analytics\n  if (stats.fps < 30) {\n    analytics.track('low_fps', stats);\n  }\n}\n```\n\n## Checklist\n\nBefore shipping:\n\n- [ ] Profile with Chrome DevTools\n- [ ] Test on low-end Android device\n- [ ] Measure memory usage over time\n- [ ] Verify 60 FPS on target devices\n- [ ] Add loading states\n- [ ] Implement fallback for unsupported devices\n- [ ] Respect prefers-reduced-motion\n\n## Resources\n\n- [Three.js Manual](https://threejs.org/manual/)\n- [WebGL Fundamentals](https://webglfundamentals.org/)\n- [GPU Gems (free online)](https://developer.nvidia.com/gpugems/gpugems/contributors)\n\n## Conclusion\n\n3D on the web is incredibly powerful, but requires discipline and optimization. Start with a performance budget, measure constantly, and optimize ruthlessly. Your users will thank you with longer sessions and better engagement.\n\nWhat optimization techniques have worked for you? [Let me know on Twitter](https://twitter.com/roshankhatri)!\n",
          "code": "var Component=(()=>{var p=Object.create;var c=Object.defineProperty;var B=Object.getOwnPropertyDescriptor;var y=Object.getOwnPropertyNames;var F=Object.getPrototypeOf,A=Object.prototype.hasOwnProperty;var C=(n,l)=>()=>(l||n((l={exports:{}}).exports,l),l.exports),E=(n,l)=>{for(var r in l)c(n,r,{get:l[r],enumerable:!0})},a=(n,l,r,o)=>{if(l&&typeof l==\"object\"||typeof l==\"function\")for(let s of y(l))!A.call(n,s)&&s!==r&&c(n,s,{get:()=>l[s],enumerable:!(o=B(l,s))||o.enumerable});return n};var m=(n,l,r)=>(r=n!=null?p(F(n)):{},a(l||!n||!n.__esModule?c(r,\"default\",{value:n,enumerable:!0}):r,n)),u=n=>a(c({},\"__esModule\",{value:!0}),n);var t=C((b,i)=>{i.exports=_jsx_runtime});var g={};E(g,{default:()=>h,frontmatter:()=>D});var e=m(t()),D={title:\"Building Performant 3D Experiences on the Web\",summary:\"A deep dive into optimizing Three.js applications for production, covering rendering techniques, memory management, and mobile performance.\",tags:[\"WebGL\",\"Performance\",\"Three.js\",\"Tutorial\"],publishedAt:\"2024-10-15\",published:!0};function d(n){let l={a:\"a\",code:\"code\",figure:\"figure\",h2:\"h2\",h3:\"h3\",input:\"input\",li:\"li\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",ul:\"ul\",...n.components};return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(l.h2,{id:\"introduction\",children:(0,e.jsx)(l.a,{className:\"anchor\",href:\"#introduction\",children:\"Introduction\"})}),`\n`,(0,e.jsx)(l.p,{children:\"WebGL and Three.js have democratized 3D graphics on the web, but building performant 3D experiences that work across devices remains challenging. After shipping multiple production 3D applications, I've learned valuable lessons about optimization that I want to share.\"}),`\n`,(0,e.jsx)(l.h2,{id:\"the-performance-budget\",children:(0,e.jsx)(l.a,{className:\"anchor\",href:\"#the-performance-budget\",children:\"The Performance Budget\"})}),`\n`,(0,e.jsx)(l.p,{children:\"Before diving into techniques, establish your performance budget:\"}),`\n`,(0,e.jsxs)(l.ul,{children:[`\n`,(0,e.jsxs)(l.li,{children:[(0,e.jsx)(l.strong,{children:\"Target:\"}),\" 60 FPS (16.67ms per frame)\"]}),`\n`,(0,e.jsxs)(l.li,{children:[(0,e.jsx)(l.strong,{children:\"Budget breakdown:\"}),`\n`,(0,e.jsxs)(l.ul,{children:[`\n`,(0,e.jsx)(l.li,{children:\"JavaScript: 3-4ms\"}),`\n`,(0,e.jsx)(l.li,{children:\"Rendering: 8-10ms\"}),`\n`,(0,e.jsx)(l.li,{children:\"Browser work: 3-4ms\"}),`\n`,(0,e.jsx)(l.li,{children:\"Buffer: 2ms\"}),`\n`]}),`\n`]}),`\n`]}),`\n`,(0,e.jsx)(l.p,{children:\"Monitor these with Chrome DevTools Performance tab.\"}),`\n`,(0,e.jsx)(l.h2,{id:\"optimization-techniques\",children:(0,e.jsx)(l.a,{className:\"anchor\",href:\"#optimization-techniques\",children:\"Optimization Techniques\"})}),`\n`,(0,e.jsx)(l.h3,{id:\"1-instanced-rendering\",children:(0,e.jsx)(l.a,{className:\"anchor\",href:\"#1-instanced-rendering\",children:\"1. Instanced Rendering\"})}),`\n`,(0,e.jsxs)(l.p,{children:[\"Rendering thousands of similar objects? Use \",(0,e.jsx)(l.code,{children:\"InstancedMesh\"}),\":\"]}),`\n`,(0,e.jsx)(l.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,e.jsx)(l.pre,{tabIndex:\"0\",\"data-language\":\"typescript\",\"data-theme\":\"one-dark-pro\",children:(0,e.jsxs)(l.code,{\"data-language\":\"typescript\",\"data-theme\":\"one-dark-pro\",style:{display:\"grid\"},children:[(0,e.jsx)(l.span,{\"data-line\":\"\",children:(0,e.jsx)(l.span,{style:{color:\"#7F848E\",fontStyle:\"italic\"},children:\"// \\u274C Bad: Individual meshes\"})}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#C678DD\"},children:\"const\"}),(0,e.jsx)(l.span,{style:{color:\"#E5C07B\"},children:\" meshes\"}),(0,e.jsx)(l.span,{style:{color:\"#56B6C2\"},children:\" =\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\" [];\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#C678DD\"},children:\"for\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\" (\"}),(0,e.jsx)(l.span,{style:{color:\"#C678DD\"},children:\"let\"}),(0,e.jsx)(l.span,{style:{color:\"#E06C75\"},children:\" i\"}),(0,e.jsx)(l.span,{style:{color:\"#56B6C2\"},children:\" =\"}),(0,e.jsx)(l.span,{style:{color:\"#D19A66\"},children:\" 0\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\"; \"}),(0,e.jsx)(l.span,{style:{color:\"#E06C75\"},children:\"i\"}),(0,e.jsx)(l.span,{style:{color:\"#56B6C2\"},children:\" <\"}),(0,e.jsx)(l.span,{style:{color:\"#D19A66\"},children:\" 10000\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\"; \"}),(0,e.jsx)(l.span,{style:{color:\"#E06C75\"},children:\"i\"}),(0,e.jsx)(l.span,{style:{color:\"#56B6C2\"},children:\"++\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\") {\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#C678DD\"},children:\"  const\"}),(0,e.jsx)(l.span,{style:{color:\"#E5C07B\"},children:\" mesh\"}),(0,e.jsx)(l.span,{style:{color:\"#56B6C2\"},children:\" =\"}),(0,e.jsx)(l.span,{style:{color:\"#C678DD\"},children:\" new\"}),(0,e.jsx)(l.span,{style:{color:\"#E5C07B\"},children:\" THREE\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#61AFEF\"},children:\"Mesh\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#E06C75\"},children:\"geometry\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\", \"}),(0,e.jsx)(l.span,{style:{color:\"#E06C75\"},children:\"material\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\");\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#E5C07B\"},children:\"  mesh\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#E5C07B\"},children:\"position\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#61AFEF\"},children:\"set\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#E06C75\"},children:\"x\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\", \"}),(0,e.jsx)(l.span,{style:{color:\"#E06C75\"},children:\"y\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\", \"}),(0,e.jsx)(l.span,{style:{color:\"#E06C75\"},children:\"z\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\");\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#E5C07B\"},children:\"  scene\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#61AFEF\"},children:\"add\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#E06C75\"},children:\"mesh\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\");\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#E5C07B\"},children:\"  meshes\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#61AFEF\"},children:\"push\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#E06C75\"},children:\"mesh\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\");\"})]}),`\n`,(0,e.jsx)(l.span,{\"data-line\":\"\",children:(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\"}\"})}),`\n`,(0,e.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsx)(l.span,{\"data-line\":\"\",children:(0,e.jsx)(l.span,{style:{color:\"#7F848E\",fontStyle:\"italic\"},children:\"// \\u2705 Good: Instanced mesh\"})}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#C678DD\"},children:\"const\"}),(0,e.jsx)(l.span,{style:{color:\"#E5C07B\"},children:\" instancedMesh\"}),(0,e.jsx)(l.span,{style:{color:\"#56B6C2\"},children:\" =\"}),(0,e.jsx)(l.span,{style:{color:\"#C678DD\"},children:\" new\"}),(0,e.jsx)(l.span,{style:{color:\"#E5C07B\"},children:\" THREE\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#61AFEF\"},children:\"InstancedMesh\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\"(\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#E06C75\"},children:\"  geometry\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\",\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#E06C75\"},children:\"  material\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\",\"})]}),`\n`,(0,e.jsx)(l.span,{\"data-line\":\"\",children:(0,e.jsx)(l.span,{style:{color:\"#D19A66\"},children:\"  10000\"})}),`\n`,(0,e.jsx)(l.span,{\"data-line\":\"\",children:(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\");\"})}),`\n`,(0,e.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#C678DD\"},children:\"for\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\" (\"}),(0,e.jsx)(l.span,{style:{color:\"#C678DD\"},children:\"let\"}),(0,e.jsx)(l.span,{style:{color:\"#E06C75\"},children:\" i\"}),(0,e.jsx)(l.span,{style:{color:\"#56B6C2\"},children:\" =\"}),(0,e.jsx)(l.span,{style:{color:\"#D19A66\"},children:\" 0\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\"; \"}),(0,e.jsx)(l.span,{style:{color:\"#E06C75\"},children:\"i\"}),(0,e.jsx)(l.span,{style:{color:\"#56B6C2\"},children:\" <\"}),(0,e.jsx)(l.span,{style:{color:\"#D19A66\"},children:\" 10000\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\"; \"}),(0,e.jsx)(l.span,{style:{color:\"#E06C75\"},children:\"i\"}),(0,e.jsx)(l.span,{style:{color:\"#56B6C2\"},children:\"++\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\") {\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#E5C07B\"},children:\"  matrix\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#61AFEF\"},children:\"setPosition\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#E06C75\"},children:\"x\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\", \"}),(0,e.jsx)(l.span,{style:{color:\"#E06C75\"},children:\"y\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\", \"}),(0,e.jsx)(l.span,{style:{color:\"#E06C75\"},children:\"z\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\");\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#E5C07B\"},children:\"  instancedMesh\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#61AFEF\"},children:\"setMatrixAt\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#E06C75\"},children:\"i\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\", \"}),(0,e.jsx)(l.span,{style:{color:\"#E06C75\"},children:\"matrix\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\");\"})]}),`\n`,(0,e.jsx)(l.span,{\"data-line\":\"\",children:(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\"}\"})}),`\n`,(0,e.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#E5C07B\"},children:\"instancedMesh\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#E5C07B\"},children:\"instanceMatrix\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#E06C75\"},children:\"needsUpdate\"}),(0,e.jsx)(l.span,{style:{color:\"#56B6C2\"},children:\" =\"}),(0,e.jsx)(l.span,{style:{color:\"#D19A66\"},children:\" true\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\";\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#E5C07B\"},children:\"scene\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#61AFEF\"},children:\"add\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#E06C75\"},children:\"instancedMesh\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\");\"})]})]})})}),`\n`,(0,e.jsxs)(l.p,{children:[(0,e.jsx)(l.strong,{children:\"Impact:\"}),\" 100x fewer draw calls, 10x faster rendering.\"]}),`\n`,(0,e.jsx)(l.h3,{id:\"2-geometry-optimization\",children:(0,e.jsx)(l.a,{className:\"anchor\",href:\"#2-geometry-optimization\",children:\"2. Geometry Optimization\"})}),`\n`,(0,e.jsx)(l.p,{children:\"Reduce vertex count aggressively:\"}),`\n`,(0,e.jsx)(l.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,e.jsx)(l.pre,{tabIndex:\"0\",\"data-language\":\"typescript\",\"data-theme\":\"one-dark-pro\",children:(0,e.jsxs)(l.code,{\"data-language\":\"typescript\",\"data-theme\":\"one-dark-pro\",style:{display:\"grid\"},children:[(0,e.jsx)(l.span,{\"data-line\":\"\",children:(0,e.jsx)(l.span,{style:{color:\"#7F848E\",fontStyle:\"italic\"},children:\"// Use LOD (Level of Detail)\"})}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#C678DD\"},children:\"const\"}),(0,e.jsx)(l.span,{style:{color:\"#E5C07B\"},children:\" lod\"}),(0,e.jsx)(l.span,{style:{color:\"#56B6C2\"},children:\" =\"}),(0,e.jsx)(l.span,{style:{color:\"#C678DD\"},children:\" new\"}),(0,e.jsx)(l.span,{style:{color:\"#E5C07B\"},children:\" THREE\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#61AFEF\"},children:\"LOD\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\"();\"})]}),`\n`,(0,e.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsx)(l.span,{\"data-line\":\"\",children:(0,e.jsx)(l.span,{style:{color:\"#7F848E\",fontStyle:\"italic\"},children:\"// High detail (close)\"})}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#E5C07B\"},children:\"lod\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#61AFEF\"},children:\"addLevel\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#E06C75\"},children:\"highPolyMesh\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\", \"}),(0,e.jsx)(l.span,{style:{color:\"#D19A66\"},children:\"0\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\");\"})]}),`\n`,(0,e.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsx)(l.span,{\"data-line\":\"\",children:(0,e.jsx)(l.span,{style:{color:\"#7F848E\",fontStyle:\"italic\"},children:\"// Medium detail\"})}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#E5C07B\"},children:\"lod\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#61AFEF\"},children:\"addLevel\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#E06C75\"},children:\"mediumPolyMesh\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\", \"}),(0,e.jsx)(l.span,{style:{color:\"#D19A66\"},children:\"50\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\");\"})]}),`\n`,(0,e.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsx)(l.span,{\"data-line\":\"\",children:(0,e.jsx)(l.span,{style:{color:\"#7F848E\",fontStyle:\"italic\"},children:\"// Low detail (far)\"})}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#E5C07B\"},children:\"lod\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#61AFEF\"},children:\"addLevel\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#E06C75\"},children:\"lowPolyMesh\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\", \"}),(0,e.jsx)(l.span,{style:{color:\"#D19A66\"},children:\"200\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\");\"})]}),`\n`,(0,e.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#E5C07B\"},children:\"scene\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#61AFEF\"},children:\"add\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#E06C75\"},children:\"lod\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\");\"})]})]})})}),`\n`,(0,e.jsx)(l.p,{children:\"Also consider:\"}),`\n`,(0,e.jsxs)(l.ul,{children:[`\n`,(0,e.jsx)(l.li,{children:\"BufferGeometry instead of Geometry\"}),`\n`,(0,e.jsx)(l.li,{children:\"Merge static geometries\"}),`\n`,(0,e.jsx)(l.li,{children:\"Use indexed geometries\"}),`\n`]}),`\n`,(0,e.jsx)(l.h3,{id:\"3-texture-atlasing\",children:(0,e.jsx)(l.a,{className:\"anchor\",href:\"#3-texture-atlasing\",children:\"3. Texture Atlasing\"})}),`\n`,(0,e.jsx)(l.p,{children:\"Combine textures to reduce draw calls:\"}),`\n`,(0,e.jsx)(l.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,e.jsx)(l.pre,{tabIndex:\"0\",\"data-language\":\"typescript\",\"data-theme\":\"one-dark-pro\",children:(0,e.jsxs)(l.code,{\"data-language\":\"typescript\",\"data-theme\":\"one-dark-pro\",style:{display:\"grid\"},children:[(0,e.jsx)(l.span,{\"data-line\":\"\",children:(0,e.jsx)(l.span,{style:{color:\"#7F848E\",fontStyle:\"italic\"},children:\"// Create atlas\"})}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#C678DD\"},children:\"const\"}),(0,e.jsx)(l.span,{style:{color:\"#E5C07B\"},children:\" canvas\"}),(0,e.jsx)(l.span,{style:{color:\"#56B6C2\"},children:\" =\"}),(0,e.jsx)(l.span,{style:{color:\"#E5C07B\"},children:\" document\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#61AFEF\"},children:\"createElement\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#98C379\"},children:\"'canvas'\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\");\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#E5C07B\"},children:\"canvas\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#E06C75\"},children:\"width\"}),(0,e.jsx)(l.span,{style:{color:\"#56B6C2\"},children:\" =\"}),(0,e.jsx)(l.span,{style:{color:\"#D19A66\"},children:\" 2048\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\";\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#E5C07B\"},children:\"canvas\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#E06C75\"},children:\"height\"}),(0,e.jsx)(l.span,{style:{color:\"#56B6C2\"},children:\" =\"}),(0,e.jsx)(l.span,{style:{color:\"#D19A66\"},children:\" 2048\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\";\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#C678DD\"},children:\"const\"}),(0,e.jsx)(l.span,{style:{color:\"#E5C07B\"},children:\" ctx\"}),(0,e.jsx)(l.span,{style:{color:\"#56B6C2\"},children:\" =\"}),(0,e.jsx)(l.span,{style:{color:\"#E5C07B\"},children:\" canvas\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#61AFEF\"},children:\"getContext\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#98C379\"},children:\"'2d'\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\")\"}),(0,e.jsx)(l.span,{style:{color:\"#56B6C2\"},children:\"!\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\";\"})]}),`\n`,(0,e.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsx)(l.span,{\"data-line\":\"\",children:(0,e.jsx)(l.span,{style:{color:\"#7F848E\",fontStyle:\"italic\"},children:\"// Pack textures\"})}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#E5C07B\"},children:\"textures\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#61AFEF\"},children:\"forEach\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\"((\"}),(0,e.jsx)(l.span,{style:{color:\"#E06C75\",fontStyle:\"italic\"},children:\"img\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\", \"}),(0,e.jsx)(l.span,{style:{color:\"#E06C75\",fontStyle:\"italic\"},children:\"i\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\") \"}),(0,e.jsx)(l.span,{style:{color:\"#C678DD\"},children:\"=>\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\" {\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#E5C07B\"},children:\"  ctx\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#61AFEF\"},children:\"drawImage\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#E06C75\"},children:\"img\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\", \"}),(0,e.jsx)(l.span,{style:{color:\"#E06C75\"},children:\"x\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\", \"}),(0,e.jsx)(l.span,{style:{color:\"#E06C75\"},children:\"y\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\", \"}),(0,e.jsx)(l.span,{style:{color:\"#E06C75\"},children:\"w\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\", \"}),(0,e.jsx)(l.span,{style:{color:\"#E06C75\"},children:\"h\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\");\"})]}),`\n`,(0,e.jsx)(l.span,{\"data-line\":\"\",children:(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\"});\"})}),`\n`,(0,e.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#C678DD\"},children:\"const\"}),(0,e.jsx)(l.span,{style:{color:\"#E5C07B\"},children:\" atlasTexture\"}),(0,e.jsx)(l.span,{style:{color:\"#56B6C2\"},children:\" =\"}),(0,e.jsx)(l.span,{style:{color:\"#C678DD\"},children:\" new\"}),(0,e.jsx)(l.span,{style:{color:\"#E5C07B\"},children:\" THREE\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#61AFEF\"},children:\"CanvasTexture\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#E06C75\"},children:\"canvas\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\");\"})]})]})})}),`\n`,(0,e.jsx)(l.p,{children:\"Don't forget to update UVs!\"}),`\n`,(0,e.jsx)(l.h3,{id:\"4-frustum-culling\",children:(0,e.jsx)(l.a,{className:\"anchor\",href:\"#4-frustum-culling\",children:\"4. Frustum Culling\"})}),`\n`,(0,e.jsx)(l.p,{children:\"Three.js does this automatically, but you can optimize further:\"}),`\n`,(0,e.jsx)(l.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,e.jsx)(l.pre,{tabIndex:\"0\",\"data-language\":\"typescript\",\"data-theme\":\"one-dark-pro\",children:(0,e.jsxs)(l.code,{\"data-language\":\"typescript\",\"data-theme\":\"one-dark-pro\",style:{display:\"grid\"},children:[(0,e.jsx)(l.span,{\"data-line\":\"\",children:(0,e.jsx)(l.span,{style:{color:\"#7F848E\",fontStyle:\"italic\"},children:\"// Manual culling for custom objects\"})}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#C678DD\"},children:\"const\"}),(0,e.jsx)(l.span,{style:{color:\"#E5C07B\"},children:\" frustum\"}),(0,e.jsx)(l.span,{style:{color:\"#56B6C2\"},children:\" =\"}),(0,e.jsx)(l.span,{style:{color:\"#C678DD\"},children:\" new\"}),(0,e.jsx)(l.span,{style:{color:\"#E5C07B\"},children:\" THREE\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#61AFEF\"},children:\"Frustum\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\"();\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#C678DD\"},children:\"const\"}),(0,e.jsx)(l.span,{style:{color:\"#E5C07B\"},children:\" cameraViewProjectionMatrix\"}),(0,e.jsx)(l.span,{style:{color:\"#56B6C2\"},children:\" =\"}),(0,e.jsx)(l.span,{style:{color:\"#C678DD\"},children:\" new\"}),(0,e.jsx)(l.span,{style:{color:\"#E5C07B\"},children:\" THREE\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#61AFEF\"},children:\"Matrix4\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\"();\"})]}),`\n`,(0,e.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#C678DD\"},children:\"function\"}),(0,e.jsx)(l.span,{style:{color:\"#61AFEF\"},children:\" updateFrustum\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\"() {\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#E5C07B\"},children:\"  camera\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#61AFEF\"},children:\"updateMatrixWorld\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\"();\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#E5C07B\"},children:\"  cameraViewProjectionMatrix\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#61AFEF\"},children:\"multiplyMatrices\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\"(\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#E5C07B\"},children:\"    camera\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#E06C75\"},children:\"projectionMatrix\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\",\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#E5C07B\"},children:\"    camera\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#E06C75\"},children:\"matrixWorldInverse\"})]}),`\n`,(0,e.jsx)(l.span,{\"data-line\":\"\",children:(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\"  );\"})}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#E5C07B\"},children:\"  frustum\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#61AFEF\"},children:\"setFromProjectionMatrix\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#E06C75\"},children:\"cameraViewProjectionMatrix\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\");\"})]}),`\n`,(0,e.jsx)(l.span,{\"data-line\":\"\",children:(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\"}\"})}),`\n`,(0,e.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#C678DD\"},children:\"function\"}),(0,e.jsx)(l.span,{style:{color:\"#61AFEF\"},children:\" isVisible\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#E06C75\",fontStyle:\"italic\"},children:\"object\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\": \"}),(0,e.jsx)(l.span,{style:{color:\"#E5C07B\"},children:\"THREE\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#E5C07B\"},children:\"Object3D\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\") {\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#C678DD\"},children:\"  return\"}),(0,e.jsx)(l.span,{style:{color:\"#E5C07B\"},children:\" frustum\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#61AFEF\"},children:\"intersectsObject\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#E06C75\"},children:\"object\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\");\"})]}),`\n`,(0,e.jsx)(l.span,{\"data-line\":\"\",children:(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\"}\"})})]})})}),`\n`,(0,e.jsx)(l.h3,{id:\"5-shader-optimization\",children:(0,e.jsx)(l.a,{className:\"anchor\",href:\"#5-shader-optimization\",children:\"5. Shader Optimization\"})}),`\n`,(0,e.jsx)(l.p,{children:\"Move calculations to vertex shader when possible:\"}),`\n`,(0,e.jsx)(l.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,e.jsx)(l.pre,{tabIndex:\"0\",\"data-language\":\"glsl\",\"data-theme\":\"one-dark-pro\",children:(0,e.jsxs)(l.code,{\"data-language\":\"glsl\",\"data-theme\":\"one-dark-pro\",style:{display:\"grid\"},children:[(0,e.jsx)(l.span,{\"data-line\":\"\",children:(0,e.jsx)(l.span,{style:{color:\"#7F848E\",fontStyle:\"italic\"},children:\"// \\u274C Fragment shader (runs per pixel)\"})}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#C678DD\"},children:\"varying\"}),(0,e.jsx)(l.span,{style:{color:\"#C678DD\"},children:\" vec3\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\" vNormal;\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#C678DD\"},children:\"void\"}),(0,e.jsx)(l.span,{style:{color:\"#61AFEF\"},children:\" main\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\"() {\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\"  vec3 light \"}),(0,e.jsx)(l.span,{style:{color:\"#C678DD\"},children:\"=\"}),(0,e.jsx)(l.span,{style:{color:\"#61AFEF\"},children:\" normalize\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#61AFEF\"},children:\"vec3\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#D19A66\"},children:\"1.0\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\", \"}),(0,e.jsx)(l.span,{style:{color:\"#D19A66\"},children:\"1.0\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\", \"}),(0,e.jsx)(l.span,{style:{color:\"#D19A66\"},children:\"1.0\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\"));\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#C678DD\"},children:\"  float\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\" intensity \"}),(0,e.jsx)(l.span,{style:{color:\"#C678DD\"},children:\"=\"}),(0,e.jsx)(l.span,{style:{color:\"#61AFEF\"},children:\" max\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#61AFEF\"},children:\"dot\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\"(vNormal, light), \"}),(0,e.jsx)(l.span,{style:{color:\"#D19A66\"},children:\"0.0\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\");\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\"  gl_FragColor \"}),(0,e.jsx)(l.span,{style:{color:\"#C678DD\"},children:\"=\"}),(0,e.jsx)(l.span,{style:{color:\"#61AFEF\"},children:\" vec4\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#61AFEF\"},children:\"vec3\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\"(intensity), \"}),(0,e.jsx)(l.span,{style:{color:\"#D19A66\"},children:\"1.0\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\");\"})]}),`\n`,(0,e.jsx)(l.span,{\"data-line\":\"\",children:(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\"}\"})}),`\n`,(0,e.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsx)(l.span,{\"data-line\":\"\",children:(0,e.jsx)(l.span,{style:{color:\"#7F848E\",fontStyle:\"italic\"},children:\"// \\u2705 Vertex shader (runs per vertex)\"})}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#C678DD\"},children:\"attribute\"}),(0,e.jsx)(l.span,{style:{color:\"#C678DD\"},children:\" vec3\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\" normal;\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#C678DD\"},children:\"varying\"}),(0,e.jsx)(l.span,{style:{color:\"#C678DD\"},children:\" float\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\" vIntensity;\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#C678DD\"},children:\"void\"}),(0,e.jsx)(l.span,{style:{color:\"#61AFEF\"},children:\" main\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\"() {\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\"  vec3 light \"}),(0,e.jsx)(l.span,{style:{color:\"#C678DD\"},children:\"=\"}),(0,e.jsx)(l.span,{style:{color:\"#61AFEF\"},children:\" normalize\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#61AFEF\"},children:\"vec3\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#D19A66\"},children:\"1.0\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\", \"}),(0,e.jsx)(l.span,{style:{color:\"#D19A66\"},children:\"1.0\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\", \"}),(0,e.jsx)(l.span,{style:{color:\"#D19A66\"},children:\"1.0\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\"));\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\"  vIntensity \"}),(0,e.jsx)(l.span,{style:{color:\"#C678DD\"},children:\"=\"}),(0,e.jsx)(l.span,{style:{color:\"#61AFEF\"},children:\" max\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#61AFEF\"},children:\"dot\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\"(normal, light), \"}),(0,e.jsx)(l.span,{style:{color:\"#D19A66\"},children:\"0.0\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\");\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\"  gl_Position \"}),(0,e.jsx)(l.span,{style:{color:\"#C678DD\"},children:\"=\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\" projectionMatrix \"}),(0,e.jsx)(l.span,{style:{color:\"#C678DD\"},children:\"*\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\" modelViewMatrix \"}),(0,e.jsx)(l.span,{style:{color:\"#C678DD\"},children:\"*\"}),(0,e.jsx)(l.span,{style:{color:\"#61AFEF\"},children:\" vec4\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\"(position, \"}),(0,e.jsx)(l.span,{style:{color:\"#D19A66\"},children:\"1.0\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\");\"})]}),`\n`,(0,e.jsx)(l.span,{\"data-line\":\"\",children:(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\"}\"})})]})})}),`\n`,(0,e.jsx)(l.h2,{id:\"mobile-specific-optimizations\",children:(0,e.jsx)(l.a,{className:\"anchor\",href:\"#mobile-specific-optimizations\",children:\"Mobile-Specific Optimizations\"})}),`\n`,(0,e.jsx)(l.p,{children:\"Mobile GPUs are less powerful\\u2014adapt accordingly:\"}),`\n`,(0,e.jsx)(l.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,e.jsx)(l.pre,{tabIndex:\"0\",\"data-language\":\"typescript\",\"data-theme\":\"one-dark-pro\",children:(0,e.jsxs)(l.code,{\"data-language\":\"typescript\",\"data-theme\":\"one-dark-pro\",style:{display:\"grid\"},children:[(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#C678DD\"},children:\"const\"}),(0,e.jsx)(l.span,{style:{color:\"#E5C07B\"},children:\" isMobile\"}),(0,e.jsx)(l.span,{style:{color:\"#56B6C2\"},children:\" =\"}),(0,e.jsx)(l.span,{style:{color:\"#E06C75\"},children:\" /iPhone\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\"|\"}),(0,e.jsx)(l.span,{style:{color:\"#E06C75\"},children:\"iPad\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\"|\"}),(0,e.jsx)(l.span,{style:{color:\"#E06C75\"},children:\"Android/\"}),(0,e.jsx)(l.span,{style:{color:\"#C678DD\"},children:\"i\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#61AFEF\"},children:\"test\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#E5C07B\"},children:\"navigator\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#E06C75\"},children:\"userAgent\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\");\"})]}),`\n`,(0,e.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#C678DD\"},children:\"const\"}),(0,e.jsx)(l.span,{style:{color:\"#E5C07B\"},children:\" config\"}),(0,e.jsx)(l.span,{style:{color:\"#56B6C2\"},children:\" =\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\" {\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#E06C75\"},children:\"  shadowMapEnabled\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\": \"}),(0,e.jsx)(l.span,{style:{color:\"#56B6C2\"},children:\"!\"}),(0,e.jsx)(l.span,{style:{color:\"#E06C75\"},children:\"isMobile\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\",\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#E06C75\"},children:\"  antialias\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\": \"}),(0,e.jsx)(l.span,{style:{color:\"#56B6C2\"},children:\"!\"}),(0,e.jsx)(l.span,{style:{color:\"#E06C75\"},children:\"isMobile\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\",\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#E06C75\"},children:\"  pixelRatio\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\": \"}),(0,e.jsx)(l.span,{style:{color:\"#E5C07B\"},children:\"Math\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#61AFEF\"},children:\"min\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#E5C07B\"},children:\"window\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#E06C75\"},children:\"devicePixelRatio\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\", \"}),(0,e.jsx)(l.span,{style:{color:\"#E06C75\"},children:\"isMobile\"}),(0,e.jsx)(l.span,{style:{color:\"#C678DD\"},children:\" ?\"}),(0,e.jsx)(l.span,{style:{color:\"#D19A66\"},children:\" 2\"}),(0,e.jsx)(l.span,{style:{color:\"#C678DD\"},children:\" :\"}),(0,e.jsx)(l.span,{style:{color:\"#D19A66\"},children:\" 3\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\"),\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#E06C75\"},children:\"  maxParticles\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\": \"}),(0,e.jsx)(l.span,{style:{color:\"#E06C75\"},children:\"isMobile\"}),(0,e.jsx)(l.span,{style:{color:\"#C678DD\"},children:\" ?\"}),(0,e.jsx)(l.span,{style:{color:\"#D19A66\"},children:\" 5000\"}),(0,e.jsx)(l.span,{style:{color:\"#C678DD\"},children:\" :\"}),(0,e.jsx)(l.span,{style:{color:\"#D19A66\"},children:\" 50000\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\",\"})]}),`\n`,(0,e.jsx)(l.span,{\"data-line\":\"\",children:(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\"};\"})}),`\n`,(0,e.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#C678DD\"},children:\"const\"}),(0,e.jsx)(l.span,{style:{color:\"#E5C07B\"},children:\" renderer\"}),(0,e.jsx)(l.span,{style:{color:\"#56B6C2\"},children:\" =\"}),(0,e.jsx)(l.span,{style:{color:\"#C678DD\"},children:\" new\"}),(0,e.jsx)(l.span,{style:{color:\"#E5C07B\"},children:\" THREE\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#61AFEF\"},children:\"WebGLRenderer\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\"({\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#E06C75\"},children:\"  antialias\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\": \"}),(0,e.jsx)(l.span,{style:{color:\"#E5C07B\"},children:\"config\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#E06C75\"},children:\"antialias\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\",\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#E06C75\"},children:\"  powerPreference\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\": \"}),(0,e.jsx)(l.span,{style:{color:\"#98C379\"},children:\"'high-performance'\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\",\"})]}),`\n`,(0,e.jsx)(l.span,{\"data-line\":\"\",children:(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\"});\"})}),`\n`,(0,e.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#E5C07B\"},children:\"renderer\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#61AFEF\"},children:\"setPixelRatio\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#E5C07B\"},children:\"config\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#E06C75\"},children:\"pixelRatio\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\");\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#E5C07B\"},children:\"renderer\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#E5C07B\"},children:\"shadowMap\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#E06C75\"},children:\"enabled\"}),(0,e.jsx)(l.span,{style:{color:\"#56B6C2\"},children:\" =\"}),(0,e.jsx)(l.span,{style:{color:\"#E5C07B\"},children:\" config\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#E06C75\"},children:\"shadowMapEnabled\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\";\"})]})]})})}),`\n`,(0,e.jsx)(l.h2,{id:\"memory-management\",children:(0,e.jsx)(l.a,{className:\"anchor\",href:\"#memory-management\",children:\"Memory Management\"})}),`\n`,(0,e.jsx)(l.p,{children:\"Dispose properly to avoid memory leaks:\"}),`\n`,(0,e.jsx)(l.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,e.jsx)(l.pre,{tabIndex:\"0\",\"data-language\":\"typescript\",\"data-theme\":\"one-dark-pro\",children:(0,e.jsxs)(l.code,{\"data-language\":\"typescript\",\"data-theme\":\"one-dark-pro\",style:{display:\"grid\"},children:[(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#C678DD\"},children:\"function\"}),(0,e.jsx)(l.span,{style:{color:\"#61AFEF\"},children:\" dispose\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#E06C75\",fontStyle:\"italic\"},children:\"object\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\": \"}),(0,e.jsx)(l.span,{style:{color:\"#E5C07B\"},children:\"THREE\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#E5C07B\"},children:\"Object3D\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\") {\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#E5C07B\"},children:\"  object\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#61AFEF\"},children:\"traverse\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\"((\"}),(0,e.jsx)(l.span,{style:{color:\"#E06C75\",fontStyle:\"italic\"},children:\"child\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\") \"}),(0,e.jsx)(l.span,{style:{color:\"#C678DD\"},children:\"=>\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\" {\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#C678DD\"},children:\"    if\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\" (\"}),(0,e.jsx)(l.span,{style:{color:\"#E06C75\"},children:\"child\"}),(0,e.jsx)(l.span,{style:{color:\"#C678DD\"},children:\" instanceof\"}),(0,e.jsx)(l.span,{style:{color:\"#E5C07B\"},children:\" THREE\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#E5C07B\"},children:\"Mesh\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\") {\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#E5C07B\"},children:\"      child\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#E5C07B\"},children:\"geometry\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#61AFEF\"},children:\"dispose\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\"();\"})]}),`\n`,(0,e.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#C678DD\"},children:\"      if\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\" (\"}),(0,e.jsx)(l.span,{style:{color:\"#E5C07B\"},children:\"Array\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#61AFEF\"},children:\"isArray\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#E5C07B\"},children:\"child\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#E06C75\"},children:\"material\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\")) {\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#E5C07B\"},children:\"        child\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#E5C07B\"},children:\"material\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#61AFEF\"},children:\"forEach\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#E06C75\",fontStyle:\"italic\"},children:\"m\"}),(0,e.jsx)(l.span,{style:{color:\"#C678DD\"},children:\" =>\"}),(0,e.jsx)(l.span,{style:{color:\"#E5C07B\"},children:\" m\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#61AFEF\"},children:\"dispose\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\"());\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\"      } \"}),(0,e.jsx)(l.span,{style:{color:\"#C678DD\"},children:\"else\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\" {\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#E5C07B\"},children:\"        child\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#E5C07B\"},children:\"material\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#61AFEF\"},children:\"dispose\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\"();\"})]}),`\n`,(0,e.jsx)(l.span,{\"data-line\":\"\",children:(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\"      }\"})}),`\n`,(0,e.jsx)(l.span,{\"data-line\":\"\",children:(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\"    }\"})}),`\n`,(0,e.jsx)(l.span,{\"data-line\":\"\",children:(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\"  });\"})}),`\n`,(0,e.jsx)(l.span,{\"data-line\":\"\",children:(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\"}\"})}),`\n`,(0,e.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsx)(l.span,{\"data-line\":\"\",children:(0,e.jsx)(l.span,{style:{color:\"#7F848E\",fontStyle:\"italic\"},children:\"// Clean up on unmount\"})}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#61AFEF\"},children:\"useEffect\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\"(() \"}),(0,e.jsx)(l.span,{style:{color:\"#C678DD\"},children:\"=>\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\" {\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#C678DD\"},children:\"  return\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\" () \"}),(0,e.jsx)(l.span,{style:{color:\"#C678DD\"},children:\"=>\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\" {\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#61AFEF\"},children:\"    dispose\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#E06C75\"},children:\"scene\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\");\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#E5C07B\"},children:\"    renderer\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#61AFEF\"},children:\"dispose\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\"();\"})]}),`\n`,(0,e.jsx)(l.span,{\"data-line\":\"\",children:(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\"  };\"})}),`\n`,(0,e.jsx)(l.span,{\"data-line\":\"\",children:(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\"}, []);\"})})]})})}),`\n`,(0,e.jsx)(l.h2,{id:\"monitoring-performance\",children:(0,e.jsx)(l.a,{className:\"anchor\",href:\"#monitoring-performance\",children:\"Monitoring Performance\"})}),`\n`,(0,e.jsx)(l.p,{children:\"Track metrics in production:\"}),`\n`,(0,e.jsx)(l.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,e.jsx)(l.pre,{tabIndex:\"0\",\"data-language\":\"typescript\",\"data-theme\":\"one-dark-pro\",children:(0,e.jsxs)(l.code,{\"data-language\":\"typescript\",\"data-theme\":\"one-dark-pro\",style:{display:\"grid\"},children:[(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#C678DD\"},children:\"const\"}),(0,e.jsx)(l.span,{style:{color:\"#E5C07B\"},children:\" stats\"}),(0,e.jsx)(l.span,{style:{color:\"#56B6C2\"},children:\" =\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\" {\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#E06C75\"},children:\"  fps\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\": \"}),(0,e.jsx)(l.span,{style:{color:\"#D19A66\"},children:\"0\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\",\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#E06C75\"},children:\"  frameTime\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\": \"}),(0,e.jsx)(l.span,{style:{color:\"#D19A66\"},children:\"0\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\",\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#E06C75\"},children:\"  memory\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\": \"}),(0,e.jsx)(l.span,{style:{color:\"#D19A66\"},children:\"0\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\",\"})]}),`\n`,(0,e.jsx)(l.span,{\"data-line\":\"\",children:(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\"};\"})}),`\n`,(0,e.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#C678DD\"},children:\"function\"}),(0,e.jsx)(l.span,{style:{color:\"#61AFEF\"},children:\" measurePerformance\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\"() {\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#C678DD\"},children:\"  const\"}),(0,e.jsx)(l.span,{style:{color:\"#E5C07B\"},children:\" start\"}),(0,e.jsx)(l.span,{style:{color:\"#56B6C2\"},children:\" =\"}),(0,e.jsx)(l.span,{style:{color:\"#E5C07B\"},children:\" performance\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#61AFEF\"},children:\"now\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\"();\"})]}),`\n`,(0,e.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#E5C07B\"},children:\"  renderer\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#61AFEF\"},children:\"render\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#E06C75\"},children:\"scene\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\", \"}),(0,e.jsx)(l.span,{style:{color:\"#E06C75\"},children:\"camera\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\");\"})]}),`\n`,(0,e.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#E5C07B\"},children:\"  stats\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#E06C75\"},children:\"frameTime\"}),(0,e.jsx)(l.span,{style:{color:\"#56B6C2\"},children:\" =\"}),(0,e.jsx)(l.span,{style:{color:\"#E5C07B\"},children:\" performance\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#61AFEF\"},children:\"now\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\"() \"}),(0,e.jsx)(l.span,{style:{color:\"#56B6C2\"},children:\"-\"}),(0,e.jsx)(l.span,{style:{color:\"#E06C75\"},children:\" start\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\";\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#E5C07B\"},children:\"  stats\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#E06C75\"},children:\"fps\"}),(0,e.jsx)(l.span,{style:{color:\"#56B6C2\"},children:\" =\"}),(0,e.jsx)(l.span,{style:{color:\"#D19A66\"},children:\" 1000\"}),(0,e.jsx)(l.span,{style:{color:\"#56B6C2\"},children:\" /\"}),(0,e.jsx)(l.span,{style:{color:\"#E5C07B\"},children:\" stats\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#E06C75\"},children:\"frameTime\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\";\"})]}),`\n`,(0,e.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsx)(l.span,{\"data-line\":\"\",children:(0,e.jsx)(l.span,{style:{color:\"#7F848E\",fontStyle:\"italic\"},children:\"  // @ts-ignore\"})}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#E5C07B\"},children:\"  stats\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#E06C75\"},children:\"memory\"}),(0,e.jsx)(l.span,{style:{color:\"#56B6C2\"},children:\" =\"}),(0,e.jsx)(l.span,{style:{color:\"#E5C07B\"},children:\" performance\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#E5C07B\"},children:\"memory\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\"?.\"}),(0,e.jsx)(l.span,{style:{color:\"#E06C75\"},children:\"usedJSHeapSize\"}),(0,e.jsx)(l.span,{style:{color:\"#56B6C2\"},children:\" ||\"}),(0,e.jsx)(l.span,{style:{color:\"#D19A66\"},children:\" 0\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\";\"})]}),`\n`,(0,e.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,e.jsx)(l.span,{\"data-line\":\"\",children:(0,e.jsx)(l.span,{style:{color:\"#7F848E\",fontStyle:\"italic\"},children:\"  // Send to analytics\"})}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#C678DD\"},children:\"  if\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\" (\"}),(0,e.jsx)(l.span,{style:{color:\"#E5C07B\"},children:\"stats\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#E06C75\"},children:\"fps\"}),(0,e.jsx)(l.span,{style:{color:\"#56B6C2\"},children:\" <\"}),(0,e.jsx)(l.span,{style:{color:\"#D19A66\"},children:\" 30\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\") {\"})]}),`\n`,(0,e.jsxs)(l.span,{\"data-line\":\"\",children:[(0,e.jsx)(l.span,{style:{color:\"#E5C07B\"},children:\"    analytics\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#61AFEF\"},children:\"track\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#98C379\"},children:\"'low_fps'\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\", \"}),(0,e.jsx)(l.span,{style:{color:\"#E06C75\"},children:\"stats\"}),(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\");\"})]}),`\n`,(0,e.jsx)(l.span,{\"data-line\":\"\",children:(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\"  }\"})}),`\n`,(0,e.jsx)(l.span,{\"data-line\":\"\",children:(0,e.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\"}\"})})]})})}),`\n`,(0,e.jsx)(l.h2,{id:\"checklist\",children:(0,e.jsx)(l.a,{className:\"anchor\",href:\"#checklist\",children:\"Checklist\"})}),`\n`,(0,e.jsx)(l.p,{children:\"Before shipping:\"}),`\n`,(0,e.jsxs)(l.ul,{className:\"contains-task-list\",children:[`\n`,(0,e.jsxs)(l.li,{className:\"task-list-item\",children:[(0,e.jsx)(l.input,{type:\"checkbox\",disabled:!0}),\" \",\"Profile with Chrome DevTools\"]}),`\n`,(0,e.jsxs)(l.li,{className:\"task-list-item\",children:[(0,e.jsx)(l.input,{type:\"checkbox\",disabled:!0}),\" \",\"Test on low-end Android device\"]}),`\n`,(0,e.jsxs)(l.li,{className:\"task-list-item\",children:[(0,e.jsx)(l.input,{type:\"checkbox\",disabled:!0}),\" \",\"Measure memory usage over time\"]}),`\n`,(0,e.jsxs)(l.li,{className:\"task-list-item\",children:[(0,e.jsx)(l.input,{type:\"checkbox\",disabled:!0}),\" \",\"Verify 60 FPS on target devices\"]}),`\n`,(0,e.jsxs)(l.li,{className:\"task-list-item\",children:[(0,e.jsx)(l.input,{type:\"checkbox\",disabled:!0}),\" \",\"Add loading states\"]}),`\n`,(0,e.jsxs)(l.li,{className:\"task-list-item\",children:[(0,e.jsx)(l.input,{type:\"checkbox\",disabled:!0}),\" \",\"Implement fallback for unsupported devices\"]}),`\n`,(0,e.jsxs)(l.li,{className:\"task-list-item\",children:[(0,e.jsx)(l.input,{type:\"checkbox\",disabled:!0}),\" \",\"Respect prefers-reduced-motion\"]}),`\n`]}),`\n`,(0,e.jsx)(l.h2,{id:\"resources\",children:(0,e.jsx)(l.a,{className:\"anchor\",href:\"#resources\",children:\"Resources\"})}),`\n`,(0,e.jsxs)(l.ul,{children:[`\n`,(0,e.jsx)(l.li,{children:(0,e.jsx)(l.a,{href:\"https://threejs.org/manual/\",children:\"Three.js Manual\"})}),`\n`,(0,e.jsx)(l.li,{children:(0,e.jsx)(l.a,{href:\"https://webglfundamentals.org/\",children:\"WebGL Fundamentals\"})}),`\n`,(0,e.jsx)(l.li,{children:(0,e.jsx)(l.a,{href:\"https://developer.nvidia.com/gpugems/gpugems/contributors\",children:\"GPU Gems (free online)\"})}),`\n`]}),`\n`,(0,e.jsx)(l.h2,{id:\"conclusion\",children:(0,e.jsx)(l.a,{className:\"anchor\",href:\"#conclusion\",children:\"Conclusion\"})}),`\n`,(0,e.jsx)(l.p,{children:\"3D on the web is incredibly powerful, but requires discipline and optimization. Start with a performance budget, measure constantly, and optimize ruthlessly. Your users will thank you with longer sessions and better engagement.\"}),`\n`,(0,e.jsxs)(l.p,{children:[\"What optimization techniques have worked for you? \",(0,e.jsx)(l.a,{href:\"https://twitter.com/roshankhatri\",children:\"Let me know on Twitter\"}),\"!\"]})]})}function h(n={}){let{wrapper:l}=n.components||{};return l?(0,e.jsx)(l,{...n,children:(0,e.jsx)(d,{...n})}):d(n)}return u(g);})();\n;return Component;"
        },
        "_id": "posts/performant-3d-web.mdx",
        "_raw": {
          "sourceFilePath": "posts/performant-3d-web.mdx",
          "sourceFileName": "performant-3d-web.mdx",
          "sourceFileDir": "posts",
          "contentType": "mdx",
          "flattenedPath": "posts/performant-3d-web"
        },
        "type": "Post",
        "slug": "performant-3d-web",
        "readingTime": {
          "text": "4 min read",
          "minutes": 3.42,
          "time": 205200,
          "words": 684
        }
      },
      "documentHash": "1763187371958",
      "hasWarnings": false,
      "documentTypeName": "Post"
    },
    "posts/scaling-realtime-systems.mdx": {
      "document": {
        "title": "Scaling Real-Time Systems: Lessons from Production",
        "summary": "Practical insights from scaling WebSocket infrastructure to handle 10,000+ concurrent connections with sub-100ms latency.",
        "tags": [
          "Backend",
          "WebSockets",
          "Scalability",
          "Architecture"
        ],
        "publishedAt": "2024-09-22T00:00:00.000Z",
        "published": true,
        "body": {
          "raw": "\n## Introduction\n\nReal-time systems are deceptively hard to scale. What works for 100 users breaks at 1,000. What works at 1,000 falls apart at 10,000. This post shares lessons learned from scaling a WebSocket-based collaboration platform from prototype to production.\n\n## The Journey\n\n### Phase 1: Single Server (0-500 users)\n\n**Architecture:**\n- Single Node.js server\n- In-memory state\n- Direct WebSocket connections\n\n**Works until:** ~500 concurrent connections\n\n**Why it breaks:**\n- Memory exhausted\n- CPU bottleneck\n- Single point of failure\n\n### Phase 2: Vertical Scaling (500-2,000 users)\n\n**Changes:**\n- Bigger server (32 CPU, 64GB RAM)\n- PM2 cluster mode\n- Redis for shared state\n\n**Works until:** ~2,000 concurrent connections\n\n**Why it breaks:**\n- Cost explodes ($1,000+/month)\n- Still single point of failure\n- Connection limits hit\n\n### Phase 3: Horizontal Scaling (2,000-10,000+ users)\n\n**Final Architecture:**\n\n```\n                    ┌──────────────┐\n                    │ Load Balancer│\n                    │  (Sticky IP) │\n                    └──────┬───────┘\n                           │\n       ┌───────────────────┼───────────────────┐\n       ▼                   ▼                   ▼\n┌──────────────┐    ┌──────────────┐    ┌──────────────┐\n│ WS Server 1  │    │ WS Server 2  │    │ WS Server 3  │\n└──────┬───────┘    └──────┬───────┘    └──────┬───────┘\n       │                   │                   │\n       └───────────────────┼───────────────────┘\n                           ▼\n                    ┌──────────────┐\n                    │ Redis Pub/Sub│\n                    └──────────────┘\n```\n\n## Key Patterns\n\n### 1. Sticky Sessions\n\nCritical for WebSocket scaling:\n\n```nginx\n# nginx config\nupstream websocket {\n  ip_hash;  # Stick to same server\n  server ws1.example.com:3000;\n  server ws2.example.com:3000;\n  server ws3.example.com:3000;\n}\n```\n\nWhy? WebSocket connections are stateful. Reconnecting to a different server loses context.\n\n### 2. Redis Pub/Sub for Cross-Server Communication\n\n```typescript\n// Server 1 receives message\nwss.on('connection', (ws) => {\n  ws.on('message', (data) => {\n    // Publish to all servers\n    redis.publish('messages', JSON.stringify({\n      userId: ws.userId,\n      data,\n    }));\n  });\n});\n\n// All servers subscribe\nredis.subscribe('messages');\nredis.on('message', (channel, message) => {\n  const { userId, data } = JSON.parse(message);\n\n  // Broadcast to local connections\n  wss.clients.forEach((client) => {\n    if (client.userId !== userId) {\n      client.send(data);\n    }\n  });\n});\n```\n\n**Gotcha:** Don't send to yourself! Filter by user ID.\n\n### 3. Health Checks and Graceful Shutdown\n\n```typescript\n// Health endpoint\napp.get('/health', (req, res) => {\n  const health = {\n    uptime: process.uptime(),\n    connections: wss.clients.size,\n    memory: process.memoryUsage(),\n    status: 'healthy',\n  };\n\n  res.json(health);\n});\n\n// Graceful shutdown\nprocess.on('SIGTERM', async () => {\n  console.log('SIGTERM received, closing server...');\n\n  // Stop accepting new connections\n  server.close();\n\n  // Close existing connections gracefully\n  for (const client of wss.clients) {\n    client.close(1001, 'Server shutting down');\n  }\n\n  // Wait for cleanup\n  await redis.quit();\n\n  process.exit(0);\n});\n```\n\n### 4. Backpressure Handling\n\nPrevent overwhelming clients:\n\n```typescript\nws.on('message', async (data) => {\n  // Check if client can receive\n  if (ws.bufferedAmount > THRESHOLD) {\n    console.warn('Client backpressure detected');\n\n    // Drop message or queue\n    return;\n  }\n\n  // Process and send\n  const response = await processMessage(data);\n  ws.send(response);\n});\n```\n\n### 5. Connection Monitoring\n\nTrack connections per server:\n\n```typescript\nconst metrics = {\n  connectionsTotal: 0,\n  connectionsCurrent: 0,\n  messagesPerSecond: 0,\n};\n\nwss.on('connection', (ws) => {\n  metrics.connectionsTotal++;\n  metrics.connectionsCurrent = wss.clients.size;\n\n  // Report to monitoring\n  statsd.gauge('ws.connections', metrics.connectionsCurrent);\n\n  ws.on('close', () => {\n    metrics.connectionsCurrent = wss.clients.size;\n    statsd.gauge('ws.connections', metrics.connectionsCurrent);\n  });\n});\n\n// Message rate tracking\nsetInterval(() => {\n  statsd.gauge('ws.messages_per_sec', messageCount / 10);\n  messageCount = 0;\n}, 10000);\n```\n\n## Performance Optimizations\n\n### 1. Message Batching\n\n```typescript\nconst messageQueue: Message[] = [];\nlet flushTimeout: NodeJS.Timeout;\n\nfunction queueMessage(msg: Message) {\n  messageQueue.push(msg);\n\n  if (!flushTimeout) {\n    flushTimeout = setTimeout(flushMessages, 16); // ~60 FPS\n  }\n}\n\nfunction flushMessages() {\n  if (messageQueue.length === 0) return;\n\n  const batch = messageQueue.splice(0, messageQueue.length);\n  broadcast(JSON.stringify(batch));\n\n  flushTimeout = null;\n}\n```\n\n**Impact:** 10x reduction in messages sent.\n\n### 2. Binary Messages\n\nUse binary for large payloads:\n\n```typescript\n// JSON (slow)\nws.send(JSON.stringify({ type: 'update', data: largeObject }));\n\n// Binary (fast)\nconst buffer = msgpack.encode({ type: 'update', data: largeObject });\nws.send(buffer);\n```\n\n**Impact:** 50% size reduction, 3x faster parsing.\n\n### 3. Compression\n\nEnable per-message deflate:\n\n```typescript\nconst wss = new WebSocketServer({\n  perMessageDeflate: {\n    zlibDeflateOptions: {\n      chunkSize: 1024,\n      memLevel: 7,\n      level: 3, // Fast compression\n    },\n  },\n});\n```\n\n**Trade-off:** CPU for bandwidth. Worth it on slow connections.\n\n## Lessons Learned\n\n1. **Start with vertical scaling** - Easier to manage initially\n2. **Add metrics early** - You can't optimize what you don't measure\n3. **Test failure modes** - What happens when Redis dies?\n4. **Graceful degradation** - System should work (degraded) when WebSockets fail\n5. **Load test before scaling** - Find bottlenecks at 1x load, not 10x\n\n## Costs\n\nFor 10,000 concurrent users:\n\n- **Compute:** 3x EC2 c5.2xlarge (~$600/mo)\n- **Redis:** ElastiCache m5.large (~$150/mo)\n- **Load Balancer:** ALB (~$30/mo)\n- **Bandwidth:** ~$200/mo\n- **Total:** ~$1,000/mo ($0.10/user/mo)\n\nCompare to Socket.io Cloud: ~$5,000/mo for same scale.\n\n## Tooling\n\nEssential tools:\n\n- **Load testing:** Artillery, k6\n- **Monitoring:** Datadog, CloudWatch\n- **Profiling:** Clinic.js, Chrome DevTools\n- **Debugging:** Wireshark for packet analysis\n\n## Conclusion\n\nScaling real-time systems requires rethinking traditional web architectures. Plan for horizontal scaling early, invest in monitoring, and test failure modes religiously.\n\nThe reward? A system that feels magical to users—instant, collaborative, alive.\n\nQuestions? [Reach out on LinkedIn](https://linkedin.com/in/roshankhatri)!\n",
          "code": "var Component=(()=>{var p=Object.create;var c=Object.defineProperty;var B=Object.getOwnPropertyDescriptor;var y=Object.getOwnPropertyNames;var F=Object.getPrototypeOf,A=Object.prototype.hasOwnProperty;var C=(e,l)=>()=>(l||e((l={exports:{}}).exports,l),l.exports),g=(e,l)=>{for(var r in l)c(e,r,{get:l[r],enumerable:!0})},a=(e,l,r,o)=>{if(l&&typeof l==\"object\"||typeof l==\"function\")for(let s of y(l))!A.call(e,s)&&s!==r&&c(e,s,{get:()=>l[s],enumerable:!(o=B(l,s))||o.enumerable});return e};var u=(e,l,r)=>(r=e!=null?p(F(e)):{},a(l||!e||!e.__esModule?c(r,\"default\",{value:e,enumerable:!0}):r,e)),E=e=>a(c({},\"__esModule\",{value:!0}),e);var t=C((S,i)=>{i.exports=_jsx_runtime});var f={};g(f,{default:()=>h,frontmatter:()=>m});var n=u(t()),m={title:\"Scaling Real-Time Systems: Lessons from Production\",summary:\"Practical insights from scaling WebSocket infrastructure to handle 10,000+ concurrent connections with sub-100ms latency.\",tags:[\"Backend\",\"WebSockets\",\"Scalability\",\"Architecture\"],publishedAt:\"2024-09-22\",published:!0};function d(e){let l={a:\"a\",code:\"code\",figure:\"figure\",h2:\"h2\",h3:\"h3\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",ul:\"ul\",...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(l.h2,{id:\"introduction\",children:(0,n.jsx)(l.a,{className:\"anchor\",href:\"#introduction\",children:\"Introduction\"})}),`\n`,(0,n.jsx)(l.p,{children:\"Real-time systems are deceptively hard to scale. What works for 100 users breaks at 1,000. What works at 1,000 falls apart at 10,000. This post shares lessons learned from scaling a WebSocket-based collaboration platform from prototype to production.\"}),`\n`,(0,n.jsx)(l.h2,{id:\"the-journey\",children:(0,n.jsx)(l.a,{className:\"anchor\",href:\"#the-journey\",children:\"The Journey\"})}),`\n`,(0,n.jsx)(l.h3,{id:\"phase-1-single-server-0-500-users\",children:(0,n.jsx)(l.a,{className:\"anchor\",href:\"#phase-1-single-server-0-500-users\",children:\"Phase 1: Single Server (0-500 users)\"})}),`\n`,(0,n.jsx)(l.p,{children:(0,n.jsx)(l.strong,{children:\"Architecture:\"})}),`\n`,(0,n.jsxs)(l.ul,{children:[`\n`,(0,n.jsx)(l.li,{children:\"Single Node.js server\"}),`\n`,(0,n.jsx)(l.li,{children:\"In-memory state\"}),`\n`,(0,n.jsx)(l.li,{children:\"Direct WebSocket connections\"}),`\n`]}),`\n`,(0,n.jsxs)(l.p,{children:[(0,n.jsx)(l.strong,{children:\"Works until:\"}),\" ~500 concurrent connections\"]}),`\n`,(0,n.jsx)(l.p,{children:(0,n.jsx)(l.strong,{children:\"Why it breaks:\"})}),`\n`,(0,n.jsxs)(l.ul,{children:[`\n`,(0,n.jsx)(l.li,{children:\"Memory exhausted\"}),`\n`,(0,n.jsx)(l.li,{children:\"CPU bottleneck\"}),`\n`,(0,n.jsx)(l.li,{children:\"Single point of failure\"}),`\n`]}),`\n`,(0,n.jsx)(l.h3,{id:\"phase-2-vertical-scaling-500-2000-users\",children:(0,n.jsx)(l.a,{className:\"anchor\",href:\"#phase-2-vertical-scaling-500-2000-users\",children:\"Phase 2: Vertical Scaling (500-2,000 users)\"})}),`\n`,(0,n.jsx)(l.p,{children:(0,n.jsx)(l.strong,{children:\"Changes:\"})}),`\n`,(0,n.jsxs)(l.ul,{children:[`\n`,(0,n.jsx)(l.li,{children:\"Bigger server (32 CPU, 64GB RAM)\"}),`\n`,(0,n.jsx)(l.li,{children:\"PM2 cluster mode\"}),`\n`,(0,n.jsx)(l.li,{children:\"Redis for shared state\"}),`\n`]}),`\n`,(0,n.jsxs)(l.p,{children:[(0,n.jsx)(l.strong,{children:\"Works until:\"}),\" ~2,000 concurrent connections\"]}),`\n`,(0,n.jsx)(l.p,{children:(0,n.jsx)(l.strong,{children:\"Why it breaks:\"})}),`\n`,(0,n.jsxs)(l.ul,{children:[`\n`,(0,n.jsx)(l.li,{children:\"Cost explodes ($1,000+/month)\"}),`\n`,(0,n.jsx)(l.li,{children:\"Still single point of failure\"}),`\n`,(0,n.jsx)(l.li,{children:\"Connection limits hit\"}),`\n`]}),`\n`,(0,n.jsx)(l.h3,{id:\"phase-3-horizontal-scaling-2000-10000-users\",children:(0,n.jsx)(l.a,{className:\"anchor\",href:\"#phase-3-horizontal-scaling-2000-10000-users\",children:\"Phase 3: Horizontal Scaling (2,000-10,000+ users)\"})}),`\n`,(0,n.jsx)(l.p,{children:(0,n.jsx)(l.strong,{children:\"Final Architecture:\"})}),`\n`,(0,n.jsx)(l.pre,{children:(0,n.jsx)(l.code,{children:`                    \\u250C\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2510\n                    \\u2502 Load Balancer\\u2502\n                    \\u2502  (Sticky IP) \\u2502\n                    \\u2514\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u252C\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2518\n                           \\u2502\n       \\u250C\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u253C\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2510\n       \\u25BC                   \\u25BC                   \\u25BC\n\\u250C\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2510    \\u250C\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2510    \\u250C\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2510\n\\u2502 WS Server 1  \\u2502    \\u2502 WS Server 2  \\u2502    \\u2502 WS Server 3  \\u2502\n\\u2514\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u252C\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2518    \\u2514\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u252C\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2518    \\u2514\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u252C\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2518\n       \\u2502                   \\u2502                   \\u2502\n       \\u2514\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u253C\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2518\n                           \\u25BC\n                    \\u250C\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2510\n                    \\u2502 Redis Pub/Sub\\u2502\n                    \\u2514\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2518\n`})}),`\n`,(0,n.jsx)(l.h2,{id:\"key-patterns\",children:(0,n.jsx)(l.a,{className:\"anchor\",href:\"#key-patterns\",children:\"Key Patterns\"})}),`\n`,(0,n.jsx)(l.h3,{id:\"1-sticky-sessions\",children:(0,n.jsx)(l.a,{className:\"anchor\",href:\"#1-sticky-sessions\",children:\"1. Sticky Sessions\"})}),`\n`,(0,n.jsx)(l.p,{children:\"Critical for WebSocket scaling:\"}),`\n`,(0,n.jsx)(l.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(l.pre,{tabIndex:\"0\",\"data-language\":\"nginx\",\"data-theme\":\"one-dark-pro\",children:(0,n.jsxs)(l.code,{\"data-language\":\"nginx\",\"data-theme\":\"one-dark-pro\",style:{display:\"grid\"},children:[(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#7F848E\",fontStyle:\"italic\"},children:\"# nginx config\"})}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#C678DD\"},children:\"upstream\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\" websocket {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#C678DD\"},children:\"  ip_hash\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\";  \"}),(0,n.jsx)(l.span,{style:{color:\"#7F848E\",fontStyle:\"italic\"},children:\"# Stick to same server\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#C678DD\"},children:\"  server\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\" ws1.example.com:3000;\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#C678DD\"},children:\"  server\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\" ws2.example.com:3000;\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#C678DD\"},children:\"  server\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\" ws3.example.com:3000;\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\"}\"})})]})})}),`\n`,(0,n.jsx)(l.p,{children:\"Why? WebSocket connections are stateful. Reconnecting to a different server loses context.\"}),`\n`,(0,n.jsx)(l.h3,{id:\"2-redis-pubsub-for-cross-server-communication\",children:(0,n.jsx)(l.a,{className:\"anchor\",href:\"#2-redis-pubsub-for-cross-server-communication\",children:\"2. Redis Pub/Sub for Cross-Server Communication\"})}),`\n`,(0,n.jsx)(l.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(l.pre,{tabIndex:\"0\",\"data-language\":\"typescript\",\"data-theme\":\"one-dark-pro\",children:(0,n.jsxs)(l.code,{\"data-language\":\"typescript\",\"data-theme\":\"one-dark-pro\",style:{display:\"grid\"},children:[(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#7F848E\",fontStyle:\"italic\"},children:\"// Server 1 receives message\"})}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E5C07B\"},children:\"wss\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\".\"}),(0,n.jsx)(l.span,{style:{color:\"#61AFEF\"},children:\"on\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#98C379\"},children:\"'connection'\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\", (\"}),(0,n.jsx)(l.span,{style:{color:\"#E06C75\",fontStyle:\"italic\"},children:\"ws\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\") \"}),(0,n.jsx)(l.span,{style:{color:\"#C678DD\"},children:\"=>\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E5C07B\"},children:\"  ws\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\".\"}),(0,n.jsx)(l.span,{style:{color:\"#61AFEF\"},children:\"on\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#98C379\"},children:\"'message'\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\", (\"}),(0,n.jsx)(l.span,{style:{color:\"#E06C75\",fontStyle:\"italic\"},children:\"data\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\") \"}),(0,n.jsx)(l.span,{style:{color:\"#C678DD\"},children:\"=>\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\" {\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#7F848E\",fontStyle:\"italic\"},children:\"    // Publish to all servers\"})}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E5C07B\"},children:\"    redis\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\".\"}),(0,n.jsx)(l.span,{style:{color:\"#61AFEF\"},children:\"publish\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#98C379\"},children:\"'messages'\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\", \"}),(0,n.jsx)(l.span,{style:{color:\"#E5C07B\"},children:\"JSON\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\".\"}),(0,n.jsx)(l.span,{style:{color:\"#61AFEF\"},children:\"stringify\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\"({\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E06C75\"},children:\"      userId\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\": \"}),(0,n.jsx)(l.span,{style:{color:\"#E5C07B\"},children:\"ws\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\".\"}),(0,n.jsx)(l.span,{style:{color:\"#E06C75\"},children:\"userId\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\",\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E06C75\"},children:\"      data\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\",\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\"    }));\"})}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\"  });\"})}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\"});\"})}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#7F848E\",fontStyle:\"italic\"},children:\"// All servers subscribe\"})}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E5C07B\"},children:\"redis\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\".\"}),(0,n.jsx)(l.span,{style:{color:\"#61AFEF\"},children:\"subscribe\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#98C379\"},children:\"'messages'\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\");\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E5C07B\"},children:\"redis\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\".\"}),(0,n.jsx)(l.span,{style:{color:\"#61AFEF\"},children:\"on\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#98C379\"},children:\"'message'\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\", (\"}),(0,n.jsx)(l.span,{style:{color:\"#E06C75\",fontStyle:\"italic\"},children:\"channel\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\", \"}),(0,n.jsx)(l.span,{style:{color:\"#E06C75\",fontStyle:\"italic\"},children:\"message\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\") \"}),(0,n.jsx)(l.span,{style:{color:\"#C678DD\"},children:\"=>\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#C678DD\"},children:\"  const\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\" { \"}),(0,n.jsx)(l.span,{style:{color:\"#E5C07B\"},children:\"userId\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\", \"}),(0,n.jsx)(l.span,{style:{color:\"#E5C07B\"},children:\"data\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\" } \"}),(0,n.jsx)(l.span,{style:{color:\"#56B6C2\"},children:\"=\"}),(0,n.jsx)(l.span,{style:{color:\"#E5C07B\"},children:\" JSON\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\".\"}),(0,n.jsx)(l.span,{style:{color:\"#61AFEF\"},children:\"parse\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#E06C75\"},children:\"message\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\");\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#7F848E\",fontStyle:\"italic\"},children:\"  // Broadcast to local connections\"})}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E5C07B\"},children:\"  wss\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\".\"}),(0,n.jsx)(l.span,{style:{color:\"#E5C07B\"},children:\"clients\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\".\"}),(0,n.jsx)(l.span,{style:{color:\"#61AFEF\"},children:\"forEach\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\"((\"}),(0,n.jsx)(l.span,{style:{color:\"#E06C75\",fontStyle:\"italic\"},children:\"client\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\") \"}),(0,n.jsx)(l.span,{style:{color:\"#C678DD\"},children:\"=>\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#C678DD\"},children:\"    if\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\" (\"}),(0,n.jsx)(l.span,{style:{color:\"#E5C07B\"},children:\"client\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\".\"}),(0,n.jsx)(l.span,{style:{color:\"#E06C75\"},children:\"userId\"}),(0,n.jsx)(l.span,{style:{color:\"#56B6C2\"},children:\" !==\"}),(0,n.jsx)(l.span,{style:{color:\"#E06C75\"},children:\" userId\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\") {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E5C07B\"},children:\"      client\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\".\"}),(0,n.jsx)(l.span,{style:{color:\"#61AFEF\"},children:\"send\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#E06C75\"},children:\"data\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\");\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\"    }\"})}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\"  });\"})}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\"});\"})})]})})}),`\n`,(0,n.jsxs)(l.p,{children:[(0,n.jsx)(l.strong,{children:\"Gotcha:\"}),\" Don't send to yourself! Filter by user ID.\"]}),`\n`,(0,n.jsx)(l.h3,{id:\"3-health-checks-and-graceful-shutdown\",children:(0,n.jsx)(l.a,{className:\"anchor\",href:\"#3-health-checks-and-graceful-shutdown\",children:\"3. Health Checks and Graceful Shutdown\"})}),`\n`,(0,n.jsx)(l.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(l.pre,{tabIndex:\"0\",\"data-language\":\"typescript\",\"data-theme\":\"one-dark-pro\",children:(0,n.jsxs)(l.code,{\"data-language\":\"typescript\",\"data-theme\":\"one-dark-pro\",style:{display:\"grid\"},children:[(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#7F848E\",fontStyle:\"italic\"},children:\"// Health endpoint\"})}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E5C07B\"},children:\"app\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\".\"}),(0,n.jsx)(l.span,{style:{color:\"#61AFEF\"},children:\"get\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#98C379\"},children:\"'/health'\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\", (\"}),(0,n.jsx)(l.span,{style:{color:\"#E06C75\",fontStyle:\"italic\"},children:\"req\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\", \"}),(0,n.jsx)(l.span,{style:{color:\"#E06C75\",fontStyle:\"italic\"},children:\"res\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\") \"}),(0,n.jsx)(l.span,{style:{color:\"#C678DD\"},children:\"=>\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#C678DD\"},children:\"  const\"}),(0,n.jsx)(l.span,{style:{color:\"#E5C07B\"},children:\" health\"}),(0,n.jsx)(l.span,{style:{color:\"#56B6C2\"},children:\" =\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E06C75\"},children:\"    uptime\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\": \"}),(0,n.jsx)(l.span,{style:{color:\"#E5C07B\"},children:\"process\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\".\"}),(0,n.jsx)(l.span,{style:{color:\"#61AFEF\"},children:\"uptime\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\"(),\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E06C75\"},children:\"    connections\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\": \"}),(0,n.jsx)(l.span,{style:{color:\"#E5C07B\"},children:\"wss\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\".\"}),(0,n.jsx)(l.span,{style:{color:\"#E5C07B\"},children:\"clients\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\".\"}),(0,n.jsx)(l.span,{style:{color:\"#E06C75\"},children:\"size\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\",\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E06C75\"},children:\"    memory\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\": \"}),(0,n.jsx)(l.span,{style:{color:\"#E5C07B\"},children:\"process\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\".\"}),(0,n.jsx)(l.span,{style:{color:\"#61AFEF\"},children:\"memoryUsage\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\"(),\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E06C75\"},children:\"    status\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\": \"}),(0,n.jsx)(l.span,{style:{color:\"#98C379\"},children:\"'healthy'\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\",\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\"  };\"})}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E5C07B\"},children:\"  res\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\".\"}),(0,n.jsx)(l.span,{style:{color:\"#61AFEF\"},children:\"json\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#E06C75\"},children:\"health\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\");\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\"});\"})}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#7F848E\",fontStyle:\"italic\"},children:\"// Graceful shutdown\"})}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E5C07B\"},children:\"process\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\".\"}),(0,n.jsx)(l.span,{style:{color:\"#61AFEF\"},children:\"on\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#98C379\"},children:\"'SIGTERM'\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\", \"}),(0,n.jsx)(l.span,{style:{color:\"#C678DD\"},children:\"async\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\" () \"}),(0,n.jsx)(l.span,{style:{color:\"#C678DD\"},children:\"=>\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E5C07B\"},children:\"  console\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\".\"}),(0,n.jsx)(l.span,{style:{color:\"#61AFEF\"},children:\"log\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#98C379\"},children:\"'SIGTERM received, closing server...'\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\");\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#7F848E\",fontStyle:\"italic\"},children:\"  // Stop accepting new connections\"})}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E5C07B\"},children:\"  server\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\".\"}),(0,n.jsx)(l.span,{style:{color:\"#61AFEF\"},children:\"close\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\"();\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#7F848E\",fontStyle:\"italic\"},children:\"  // Close existing connections gracefully\"})}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#C678DD\"},children:\"  for\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\" (\"}),(0,n.jsx)(l.span,{style:{color:\"#C678DD\"},children:\"const\"}),(0,n.jsx)(l.span,{style:{color:\"#E5C07B\"},children:\" client\"}),(0,n.jsx)(l.span,{style:{color:\"#C678DD\"},children:\" of\"}),(0,n.jsx)(l.span,{style:{color:\"#E5C07B\"},children:\" wss\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\".\"}),(0,n.jsx)(l.span,{style:{color:\"#E06C75\"},children:\"clients\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\") {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E5C07B\"},children:\"    client\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\".\"}),(0,n.jsx)(l.span,{style:{color:\"#61AFEF\"},children:\"close\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#D19A66\"},children:\"1001\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\", \"}),(0,n.jsx)(l.span,{style:{color:\"#98C379\"},children:\"'Server shutting down'\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\");\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\"  }\"})}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#7F848E\",fontStyle:\"italic\"},children:\"  // Wait for cleanup\"})}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#C678DD\"},children:\"  await\"}),(0,n.jsx)(l.span,{style:{color:\"#E5C07B\"},children:\" redis\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\".\"}),(0,n.jsx)(l.span,{style:{color:\"#61AFEF\"},children:\"quit\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\"();\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E5C07B\"},children:\"  process\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\".\"}),(0,n.jsx)(l.span,{style:{color:\"#61AFEF\"},children:\"exit\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#D19A66\"},children:\"0\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\");\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\"});\"})})]})})}),`\n`,(0,n.jsx)(l.h3,{id:\"4-backpressure-handling\",children:(0,n.jsx)(l.a,{className:\"anchor\",href:\"#4-backpressure-handling\",children:\"4. Backpressure Handling\"})}),`\n`,(0,n.jsx)(l.p,{children:\"Prevent overwhelming clients:\"}),`\n`,(0,n.jsx)(l.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(l.pre,{tabIndex:\"0\",\"data-language\":\"typescript\",\"data-theme\":\"one-dark-pro\",children:(0,n.jsxs)(l.code,{\"data-language\":\"typescript\",\"data-theme\":\"one-dark-pro\",style:{display:\"grid\"},children:[(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E5C07B\"},children:\"ws\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\".\"}),(0,n.jsx)(l.span,{style:{color:\"#61AFEF\"},children:\"on\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#98C379\"},children:\"'message'\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\", \"}),(0,n.jsx)(l.span,{style:{color:\"#C678DD\"},children:\"async\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\" (\"}),(0,n.jsx)(l.span,{style:{color:\"#E06C75\",fontStyle:\"italic\"},children:\"data\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\") \"}),(0,n.jsx)(l.span,{style:{color:\"#C678DD\"},children:\"=>\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\" {\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#7F848E\",fontStyle:\"italic\"},children:\"  // Check if client can receive\"})}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#C678DD\"},children:\"  if\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\" (\"}),(0,n.jsx)(l.span,{style:{color:\"#E5C07B\"},children:\"ws\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\".\"}),(0,n.jsx)(l.span,{style:{color:\"#E06C75\"},children:\"bufferedAmount\"}),(0,n.jsx)(l.span,{style:{color:\"#56B6C2\"},children:\" >\"}),(0,n.jsx)(l.span,{style:{color:\"#E5C07B\"},children:\" THRESHOLD\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\") {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E5C07B\"},children:\"    console\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\".\"}),(0,n.jsx)(l.span,{style:{color:\"#61AFEF\"},children:\"warn\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#98C379\"},children:\"'Client backpressure detected'\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\");\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#7F848E\",fontStyle:\"italic\"},children:\"    // Drop message or queue\"})}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#C678DD\"},children:\"    return\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\";\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\"  }\"})}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#7F848E\",fontStyle:\"italic\"},children:\"  // Process and send\"})}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#C678DD\"},children:\"  const\"}),(0,n.jsx)(l.span,{style:{color:\"#E5C07B\"},children:\" response\"}),(0,n.jsx)(l.span,{style:{color:\"#56B6C2\"},children:\" =\"}),(0,n.jsx)(l.span,{style:{color:\"#C678DD\"},children:\" await\"}),(0,n.jsx)(l.span,{style:{color:\"#61AFEF\"},children:\" processMessage\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#E06C75\"},children:\"data\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\");\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E5C07B\"},children:\"  ws\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\".\"}),(0,n.jsx)(l.span,{style:{color:\"#61AFEF\"},children:\"send\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#E06C75\"},children:\"response\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\");\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\"});\"})})]})})}),`\n`,(0,n.jsx)(l.h3,{id:\"5-connection-monitoring\",children:(0,n.jsx)(l.a,{className:\"anchor\",href:\"#5-connection-monitoring\",children:\"5. Connection Monitoring\"})}),`\n`,(0,n.jsx)(l.p,{children:\"Track connections per server:\"}),`\n`,(0,n.jsx)(l.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(l.pre,{tabIndex:\"0\",\"data-language\":\"typescript\",\"data-theme\":\"one-dark-pro\",children:(0,n.jsxs)(l.code,{\"data-language\":\"typescript\",\"data-theme\":\"one-dark-pro\",style:{display:\"grid\"},children:[(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#C678DD\"},children:\"const\"}),(0,n.jsx)(l.span,{style:{color:\"#E5C07B\"},children:\" metrics\"}),(0,n.jsx)(l.span,{style:{color:\"#56B6C2\"},children:\" =\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E06C75\"},children:\"  connectionsTotal\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\": \"}),(0,n.jsx)(l.span,{style:{color:\"#D19A66\"},children:\"0\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\",\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E06C75\"},children:\"  connectionsCurrent\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\": \"}),(0,n.jsx)(l.span,{style:{color:\"#D19A66\"},children:\"0\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\",\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E06C75\"},children:\"  messagesPerSecond\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\": \"}),(0,n.jsx)(l.span,{style:{color:\"#D19A66\"},children:\"0\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\",\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\"};\"})}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E5C07B\"},children:\"wss\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\".\"}),(0,n.jsx)(l.span,{style:{color:\"#61AFEF\"},children:\"on\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#98C379\"},children:\"'connection'\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\", (\"}),(0,n.jsx)(l.span,{style:{color:\"#E06C75\",fontStyle:\"italic\"},children:\"ws\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\") \"}),(0,n.jsx)(l.span,{style:{color:\"#C678DD\"},children:\"=>\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E5C07B\"},children:\"  metrics\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\".\"}),(0,n.jsx)(l.span,{style:{color:\"#E06C75\"},children:\"connectionsTotal\"}),(0,n.jsx)(l.span,{style:{color:\"#56B6C2\"},children:\"++\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\";\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E5C07B\"},children:\"  metrics\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\".\"}),(0,n.jsx)(l.span,{style:{color:\"#E06C75\"},children:\"connectionsCurrent\"}),(0,n.jsx)(l.span,{style:{color:\"#56B6C2\"},children:\" =\"}),(0,n.jsx)(l.span,{style:{color:\"#E5C07B\"},children:\" wss\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\".\"}),(0,n.jsx)(l.span,{style:{color:\"#E5C07B\"},children:\"clients\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\".\"}),(0,n.jsx)(l.span,{style:{color:\"#E06C75\"},children:\"size\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\";\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#7F848E\",fontStyle:\"italic\"},children:\"  // Report to monitoring\"})}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E5C07B\"},children:\"  statsd\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\".\"}),(0,n.jsx)(l.span,{style:{color:\"#61AFEF\"},children:\"gauge\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#98C379\"},children:\"'ws.connections'\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\", \"}),(0,n.jsx)(l.span,{style:{color:\"#E5C07B\"},children:\"metrics\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\".\"}),(0,n.jsx)(l.span,{style:{color:\"#E06C75\"},children:\"connectionsCurrent\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\");\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E5C07B\"},children:\"  ws\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\".\"}),(0,n.jsx)(l.span,{style:{color:\"#61AFEF\"},children:\"on\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#98C379\"},children:\"'close'\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\", () \"}),(0,n.jsx)(l.span,{style:{color:\"#C678DD\"},children:\"=>\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E5C07B\"},children:\"    metrics\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\".\"}),(0,n.jsx)(l.span,{style:{color:\"#E06C75\"},children:\"connectionsCurrent\"}),(0,n.jsx)(l.span,{style:{color:\"#56B6C2\"},children:\" =\"}),(0,n.jsx)(l.span,{style:{color:\"#E5C07B\"},children:\" wss\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\".\"}),(0,n.jsx)(l.span,{style:{color:\"#E5C07B\"},children:\"clients\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\".\"}),(0,n.jsx)(l.span,{style:{color:\"#E06C75\"},children:\"size\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\";\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E5C07B\"},children:\"    statsd\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\".\"}),(0,n.jsx)(l.span,{style:{color:\"#61AFEF\"},children:\"gauge\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#98C379\"},children:\"'ws.connections'\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\", \"}),(0,n.jsx)(l.span,{style:{color:\"#E5C07B\"},children:\"metrics\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\".\"}),(0,n.jsx)(l.span,{style:{color:\"#E06C75\"},children:\"connectionsCurrent\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\");\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\"  });\"})}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\"});\"})}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#7F848E\",fontStyle:\"italic\"},children:\"// Message rate tracking\"})}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#61AFEF\"},children:\"setInterval\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\"(() \"}),(0,n.jsx)(l.span,{style:{color:\"#C678DD\"},children:\"=>\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E5C07B\"},children:\"  statsd\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\".\"}),(0,n.jsx)(l.span,{style:{color:\"#61AFEF\"},children:\"gauge\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#98C379\"},children:\"'ws.messages_per_sec'\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\", \"}),(0,n.jsx)(l.span,{style:{color:\"#E06C75\"},children:\"messageCount\"}),(0,n.jsx)(l.span,{style:{color:\"#56B6C2\"},children:\" /\"}),(0,n.jsx)(l.span,{style:{color:\"#D19A66\"},children:\" 10\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\");\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E06C75\"},children:\"  messageCount\"}),(0,n.jsx)(l.span,{style:{color:\"#56B6C2\"},children:\" =\"}),(0,n.jsx)(l.span,{style:{color:\"#D19A66\"},children:\" 0\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\";\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\"}, \"}),(0,n.jsx)(l.span,{style:{color:\"#D19A66\"},children:\"10000\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\");\"})]})]})})}),`\n`,(0,n.jsx)(l.h2,{id:\"performance-optimizations\",children:(0,n.jsx)(l.a,{className:\"anchor\",href:\"#performance-optimizations\",children:\"Performance Optimizations\"})}),`\n`,(0,n.jsx)(l.h3,{id:\"1-message-batching\",children:(0,n.jsx)(l.a,{className:\"anchor\",href:\"#1-message-batching\",children:\"1. Message Batching\"})}),`\n`,(0,n.jsx)(l.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(l.pre,{tabIndex:\"0\",\"data-language\":\"typescript\",\"data-theme\":\"one-dark-pro\",children:(0,n.jsxs)(l.code,{\"data-language\":\"typescript\",\"data-theme\":\"one-dark-pro\",style:{display:\"grid\"},children:[(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#C678DD\"},children:\"const\"}),(0,n.jsx)(l.span,{style:{color:\"#E5C07B\"},children:\" messageQueue\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\": \"}),(0,n.jsx)(l.span,{style:{color:\"#E5C07B\"},children:\"Message\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\"[] \"}),(0,n.jsx)(l.span,{style:{color:\"#56B6C2\"},children:\"=\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\" [];\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#C678DD\"},children:\"let\"}),(0,n.jsx)(l.span,{style:{color:\"#E06C75\"},children:\" flushTimeout\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\": \"}),(0,n.jsx)(l.span,{style:{color:\"#E5C07B\"},children:\"NodeJS\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\".\"}),(0,n.jsx)(l.span,{style:{color:\"#E5C07B\"},children:\"Timeout\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\";\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#C678DD\"},children:\"function\"}),(0,n.jsx)(l.span,{style:{color:\"#61AFEF\"},children:\" queueMessage\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#E06C75\",fontStyle:\"italic\"},children:\"msg\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\": \"}),(0,n.jsx)(l.span,{style:{color:\"#E5C07B\"},children:\"Message\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\") {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E5C07B\"},children:\"  messageQueue\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\".\"}),(0,n.jsx)(l.span,{style:{color:\"#61AFEF\"},children:\"push\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#E06C75\"},children:\"msg\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\");\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#C678DD\"},children:\"  if\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\" (\"}),(0,n.jsx)(l.span,{style:{color:\"#56B6C2\"},children:\"!\"}),(0,n.jsx)(l.span,{style:{color:\"#E06C75\"},children:\"flushTimeout\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\") {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E06C75\"},children:\"    flushTimeout\"}),(0,n.jsx)(l.span,{style:{color:\"#56B6C2\"},children:\" =\"}),(0,n.jsx)(l.span,{style:{color:\"#61AFEF\"},children:\" setTimeout\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#E06C75\"},children:\"flushMessages\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\", \"}),(0,n.jsx)(l.span,{style:{color:\"#D19A66\"},children:\"16\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\"); \"}),(0,n.jsx)(l.span,{style:{color:\"#7F848E\",fontStyle:\"italic\"},children:\"// ~60 FPS\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\"  }\"})}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\"}\"})}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#C678DD\"},children:\"function\"}),(0,n.jsx)(l.span,{style:{color:\"#61AFEF\"},children:\" flushMessages\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\"() {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#C678DD\"},children:\"  if\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\" (\"}),(0,n.jsx)(l.span,{style:{color:\"#E5C07B\"},children:\"messageQueue\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\".\"}),(0,n.jsx)(l.span,{style:{color:\"#E06C75\"},children:\"length\"}),(0,n.jsx)(l.span,{style:{color:\"#56B6C2\"},children:\" ===\"}),(0,n.jsx)(l.span,{style:{color:\"#D19A66\"},children:\" 0\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\") \"}),(0,n.jsx)(l.span,{style:{color:\"#C678DD\"},children:\"return\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\";\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#C678DD\"},children:\"  const\"}),(0,n.jsx)(l.span,{style:{color:\"#E5C07B\"},children:\" batch\"}),(0,n.jsx)(l.span,{style:{color:\"#56B6C2\"},children:\" =\"}),(0,n.jsx)(l.span,{style:{color:\"#E5C07B\"},children:\" messageQueue\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\".\"}),(0,n.jsx)(l.span,{style:{color:\"#61AFEF\"},children:\"splice\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#D19A66\"},children:\"0\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\", \"}),(0,n.jsx)(l.span,{style:{color:\"#E5C07B\"},children:\"messageQueue\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\".\"}),(0,n.jsx)(l.span,{style:{color:\"#E06C75\"},children:\"length\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\");\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#61AFEF\"},children:\"  broadcast\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#E5C07B\"},children:\"JSON\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\".\"}),(0,n.jsx)(l.span,{style:{color:\"#61AFEF\"},children:\"stringify\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#E06C75\"},children:\"batch\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\"));\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E06C75\"},children:\"  flushTimeout\"}),(0,n.jsx)(l.span,{style:{color:\"#56B6C2\"},children:\" =\"}),(0,n.jsx)(l.span,{style:{color:\"#D19A66\"},children:\" null\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\";\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\"}\"})})]})})}),`\n`,(0,n.jsxs)(l.p,{children:[(0,n.jsx)(l.strong,{children:\"Impact:\"}),\" 10x reduction in messages sent.\"]}),`\n`,(0,n.jsx)(l.h3,{id:\"2-binary-messages\",children:(0,n.jsx)(l.a,{className:\"anchor\",href:\"#2-binary-messages\",children:\"2. Binary Messages\"})}),`\n`,(0,n.jsx)(l.p,{children:\"Use binary for large payloads:\"}),`\n`,(0,n.jsx)(l.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(l.pre,{tabIndex:\"0\",\"data-language\":\"typescript\",\"data-theme\":\"one-dark-pro\",children:(0,n.jsxs)(l.code,{\"data-language\":\"typescript\",\"data-theme\":\"one-dark-pro\",style:{display:\"grid\"},children:[(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#7F848E\",fontStyle:\"italic\"},children:\"// JSON (slow)\"})}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E5C07B\"},children:\"ws\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\".\"}),(0,n.jsx)(l.span,{style:{color:\"#61AFEF\"},children:\"send\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#E5C07B\"},children:\"JSON\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\".\"}),(0,n.jsx)(l.span,{style:{color:\"#61AFEF\"},children:\"stringify\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\"({ \"}),(0,n.jsx)(l.span,{style:{color:\"#E06C75\"},children:\"type\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\": \"}),(0,n.jsx)(l.span,{style:{color:\"#98C379\"},children:\"'update'\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\", \"}),(0,n.jsx)(l.span,{style:{color:\"#E06C75\"},children:\"data\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\": \"}),(0,n.jsx)(l.span,{style:{color:\"#E06C75\"},children:\"largeObject\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\" }));\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#7F848E\",fontStyle:\"italic\"},children:\"// Binary (fast)\"})}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#C678DD\"},children:\"const\"}),(0,n.jsx)(l.span,{style:{color:\"#E5C07B\"},children:\" buffer\"}),(0,n.jsx)(l.span,{style:{color:\"#56B6C2\"},children:\" =\"}),(0,n.jsx)(l.span,{style:{color:\"#E5C07B\"},children:\" msgpack\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\".\"}),(0,n.jsx)(l.span,{style:{color:\"#61AFEF\"},children:\"encode\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\"({ \"}),(0,n.jsx)(l.span,{style:{color:\"#E06C75\"},children:\"type\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\": \"}),(0,n.jsx)(l.span,{style:{color:\"#98C379\"},children:\"'update'\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\", \"}),(0,n.jsx)(l.span,{style:{color:\"#E06C75\"},children:\"data\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\": \"}),(0,n.jsx)(l.span,{style:{color:\"#E06C75\"},children:\"largeObject\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\" });\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E5C07B\"},children:\"ws\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\".\"}),(0,n.jsx)(l.span,{style:{color:\"#61AFEF\"},children:\"send\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#E06C75\"},children:\"buffer\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\");\"})]})]})})}),`\n`,(0,n.jsxs)(l.p,{children:[(0,n.jsx)(l.strong,{children:\"Impact:\"}),\" 50% size reduction, 3x faster parsing.\"]}),`\n`,(0,n.jsx)(l.h3,{id:\"3-compression\",children:(0,n.jsx)(l.a,{className:\"anchor\",href:\"#3-compression\",children:\"3. Compression\"})}),`\n`,(0,n.jsx)(l.p,{children:\"Enable per-message deflate:\"}),`\n`,(0,n.jsx)(l.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(l.pre,{tabIndex:\"0\",\"data-language\":\"typescript\",\"data-theme\":\"one-dark-pro\",children:(0,n.jsxs)(l.code,{\"data-language\":\"typescript\",\"data-theme\":\"one-dark-pro\",style:{display:\"grid\"},children:[(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#C678DD\"},children:\"const\"}),(0,n.jsx)(l.span,{style:{color:\"#E5C07B\"},children:\" wss\"}),(0,n.jsx)(l.span,{style:{color:\"#56B6C2\"},children:\" =\"}),(0,n.jsx)(l.span,{style:{color:\"#C678DD\"},children:\" new\"}),(0,n.jsx)(l.span,{style:{color:\"#61AFEF\"},children:\" WebSocketServer\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\"({\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E06C75\"},children:\"  perMessageDeflate\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\": {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E06C75\"},children:\"    zlibDeflateOptions\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\": {\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E06C75\"},children:\"      chunkSize\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\": \"}),(0,n.jsx)(l.span,{style:{color:\"#D19A66\"},children:\"1024\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\",\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E06C75\"},children:\"      memLevel\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\": \"}),(0,n.jsx)(l.span,{style:{color:\"#D19A66\"},children:\"7\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\",\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E06C75\"},children:\"      level\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\": \"}),(0,n.jsx)(l.span,{style:{color:\"#D19A66\"},children:\"3\"}),(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\", \"}),(0,n.jsx)(l.span,{style:{color:\"#7F848E\",fontStyle:\"italic\"},children:\"// Fast compression\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\"    },\"})}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\"  },\"})}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#ABB2BF\"},children:\"});\"})})]})})}),`\n`,(0,n.jsxs)(l.p,{children:[(0,n.jsx)(l.strong,{children:\"Trade-off:\"}),\" CPU for bandwidth. Worth it on slow connections.\"]}),`\n`,(0,n.jsx)(l.h2,{id:\"lessons-learned\",children:(0,n.jsx)(l.a,{className:\"anchor\",href:\"#lessons-learned\",children:\"Lessons Learned\"})}),`\n`,(0,n.jsxs)(l.ol,{children:[`\n`,(0,n.jsxs)(l.li,{children:[(0,n.jsx)(l.strong,{children:\"Start with vertical scaling\"}),\" - Easier to manage initially\"]}),`\n`,(0,n.jsxs)(l.li,{children:[(0,n.jsx)(l.strong,{children:\"Add metrics early\"}),\" - You can't optimize what you don't measure\"]}),`\n`,(0,n.jsxs)(l.li,{children:[(0,n.jsx)(l.strong,{children:\"Test failure modes\"}),\" - What happens when Redis dies?\"]}),`\n`,(0,n.jsxs)(l.li,{children:[(0,n.jsx)(l.strong,{children:\"Graceful degradation\"}),\" - System should work (degraded) when WebSockets fail\"]}),`\n`,(0,n.jsxs)(l.li,{children:[(0,n.jsx)(l.strong,{children:\"Load test before scaling\"}),\" - Find bottlenecks at 1x load, not 10x\"]}),`\n`]}),`\n`,(0,n.jsx)(l.h2,{id:\"costs\",children:(0,n.jsx)(l.a,{className:\"anchor\",href:\"#costs\",children:\"Costs\"})}),`\n`,(0,n.jsx)(l.p,{children:\"For 10,000 concurrent users:\"}),`\n`,(0,n.jsxs)(l.ul,{children:[`\n`,(0,n.jsxs)(l.li,{children:[(0,n.jsx)(l.strong,{children:\"Compute:\"}),\" 3x EC2 c5.2xlarge (~$600/mo)\"]}),`\n`,(0,n.jsxs)(l.li,{children:[(0,n.jsx)(l.strong,{children:\"Redis:\"}),\" ElastiCache m5.large (~$150/mo)\"]}),`\n`,(0,n.jsxs)(l.li,{children:[(0,n.jsx)(l.strong,{children:\"Load Balancer:\"}),\" ALB (~$30/mo)\"]}),`\n`,(0,n.jsxs)(l.li,{children:[(0,n.jsx)(l.strong,{children:\"Bandwidth:\"}),\" ~$200/mo\"]}),`\n`,(0,n.jsxs)(l.li,{children:[(0,n.jsx)(l.strong,{children:\"Total:\"}),\" ~$1,000/mo ($0.10/user/mo)\"]}),`\n`]}),`\n`,(0,n.jsx)(l.p,{children:\"Compare to Socket.io Cloud: ~$5,000/mo for same scale.\"}),`\n`,(0,n.jsx)(l.h2,{id:\"tooling\",children:(0,n.jsx)(l.a,{className:\"anchor\",href:\"#tooling\",children:\"Tooling\"})}),`\n`,(0,n.jsx)(l.p,{children:\"Essential tools:\"}),`\n`,(0,n.jsxs)(l.ul,{children:[`\n`,(0,n.jsxs)(l.li,{children:[(0,n.jsx)(l.strong,{children:\"Load testing:\"}),\" Artillery, k6\"]}),`\n`,(0,n.jsxs)(l.li,{children:[(0,n.jsx)(l.strong,{children:\"Monitoring:\"}),\" Datadog, CloudWatch\"]}),`\n`,(0,n.jsxs)(l.li,{children:[(0,n.jsx)(l.strong,{children:\"Profiling:\"}),\" Clinic.js, Chrome DevTools\"]}),`\n`,(0,n.jsxs)(l.li,{children:[(0,n.jsx)(l.strong,{children:\"Debugging:\"}),\" Wireshark for packet analysis\"]}),`\n`]}),`\n`,(0,n.jsx)(l.h2,{id:\"conclusion\",children:(0,n.jsx)(l.a,{className:\"anchor\",href:\"#conclusion\",children:\"Conclusion\"})}),`\n`,(0,n.jsx)(l.p,{children:\"Scaling real-time systems requires rethinking traditional web architectures. Plan for horizontal scaling early, invest in monitoring, and test failure modes religiously.\"}),`\n`,(0,n.jsx)(l.p,{children:\"The reward? A system that feels magical to users\\u2014instant, collaborative, alive.\"}),`\n`,(0,n.jsxs)(l.p,{children:[\"Questions? \",(0,n.jsx)(l.a,{href:\"https://linkedin.com/in/roshankhatri\",children:\"Reach out on LinkedIn\"}),\"!\"]})]})}function h(e={}){let{wrapper:l}=e.components||{};return l?(0,n.jsx)(l,{...e,children:(0,n.jsx)(d,{...e})}):d(e)}return E(f);})();\n;return Component;"
        },
        "_id": "posts/scaling-realtime-systems.mdx",
        "_raw": {
          "sourceFilePath": "posts/scaling-realtime-systems.mdx",
          "sourceFileName": "scaling-realtime-systems.mdx",
          "sourceFileDir": "posts",
          "contentType": "mdx",
          "flattenedPath": "posts/scaling-realtime-systems"
        },
        "type": "Post",
        "slug": "scaling-realtime-systems",
        "readingTime": {
          "text": "4 min read",
          "minutes": 3.91,
          "time": 234600,
          "words": 782
        }
      },
      "documentHash": "1763187372169",
      "hasWarnings": false,
      "documentTypeName": "Post"
    },
    "projects/3d-data-viz.mdx": {
      "document": {
        "title": "3D Data Visualization Dashboard",
        "summary": "Interactive WebGL-powered dashboard for exploring complex datasets in 3D space with real-time filtering and immersive analytics.",
        "cover": "/images/projects/3d-viz.jpg",
        "repoUrl": "https://github.com/roshankhatri/3d-data-viz",
        "liveUrl": "https://3d-viz-demo.vercel.app",
        "tags": [
          "3D/WebGL",
          "Data Viz",
          "Frontend"
        ],
        "stack": [
          "Three.js",
          "React",
          "D3.js",
          "WebGL",
          "TypeScript",
          "Tailwind CSS"
        ],
        "metrics": {
          "lighthouse": 94,
          "perfScore": 91,
          "users": "5k+",
          "uptime": "99.8%"
        },
        "dates": {
          "start": "2024-04",
          "end": "2024-08"
        },
        "highlights": [
          "Rendered 100k+ data points at 60 FPS",
          "Reduced insights discovery time by 65%",
          "Built custom WebGL shaders for performance",
          "Fully accessible with keyboard navigation"
        ],
        "published": true,
        "body": {
          "raw": "\n## Overview\n\nCreated an immersive 3D data visualization platform that transforms complex multi-dimensional datasets into intuitive, explorable 3D scenes. Users can fly through their data, filter in real-time, and discover patterns impossible to see in traditional 2D charts.\n\n## The Problem\n\nTraditional dashboards struggle with high-dimensional data:\n\n- **2D limitations:** Hard to show relationships across 3+ dimensions\n- **Performance:** Browser freezes with 10k+ data points\n- **Engagement:** Users don't explore data deeply\n- **Accessibility:** Most 3D visualizations exclude keyboard users\n\n## Solution\n\n### 3D Rendering Engine\n\nBuilt on Three.js with custom performance optimizations:\n\n```typescript\n// Instanced rendering for 100k particles\nconst geometry = new THREE.SphereGeometry(0.1, 8, 8);\nconst material = new THREE.MeshBasicMaterial();\nconst mesh = new THREE.InstancedMesh(geometry, material, count);\n\n// Update positions via shader\nmesh.instanceMatrix.setUsage(THREE.DynamicDrawUsage);\n\n// GPU-accelerated filtering\nconst filterShader = new THREE.ShaderMaterial({\n  uniforms: {\n    filterRange: { value: new THREE.Vector2(min, max) },\n  },\n  vertexShader: /* GLSL */ `\n    attribute float dataValue;\n    varying float vVisible;\n    uniform vec2 filterRange;\n\n    void main() {\n      vVisible = step(filterRange.x, dataValue) * step(dataValue, filterRange.y);\n      // ...\n    }\n  `,\n});\n```\n\n### Interactive Features\n\n- **Orbit controls:** Smooth camera navigation\n- **Brush selection:** Draw to select data points\n- **Temporal playback:** Animate data over time\n- **Linked views:** 2D charts sync with 3D scene\n\n### Performance Techniques\n\n1. **Level of Detail (LOD):** Reduce geometry for distant objects\n2. **Frustum Culling:** Only render visible objects\n3. **Octree Spatial Index:** Fast spatial queries\n4. **Web Workers:** Off-thread data processing\n\n## Technical Deep Dive\n\n### Data Pipeline\n\n```typescript\n// Transform raw data to 3D positions\nconst transform = (data: DataPoint[]) => {\n  // Normalize to [0, 1]\n  const normalized = normalize(data);\n\n  // Apply dimensionality reduction (PCA/t-SNE)\n  const reduced = applyPCA(normalized, 3);\n\n  // Scale to scene coordinates\n  return reduced.map(p => ({\n    position: new THREE.Vector3(p.x * scale, p.y * scale, p.z * scale),\n    color: colorScale(p.category),\n    metadata: p,\n  }));\n};\n```\n\n### Accessibility Implementation\n\nMade 3D visualization keyboard-accessible:\n\n- **Focus management:** Tab through data clusters\n- **Screen reader:** Announce focused point details\n- **Alternative views:** Fallback to 2D scatter on demand\n- **Reduced motion:** Disable animations if preferred\n\n```typescript\n// Keyboard navigation\nconst focusNextPoint = () => {\n  currentIndex = (currentIndex + 1) % points.length;\n  const point = points[currentIndex];\n\n  // Move camera to point\n  animateCameraTo(point.position);\n\n  // Announce to screen reader\n  announce(`${point.label}: ${point.value}`);\n};\n```\n\n## Results\n\n### Performance\n\n- **60 FPS** with 100k particles\n- **1.2s initial load** on 4G mobile\n- **&lt;16ms frame time** during interaction\n\n### User Impact\n\n- **65% faster** insights discovery (user study)\n- **3x longer** average session duration\n- **89% satisfaction** rating from analysts\n\n## Tech Stack\n\n- **3D:** Three.js, WebGL, GLSL shaders\n- **Framework:** React 18, TypeScript\n- **Data:** D3.js for scales/axes, PCA.js\n- **UI:** Tailwind CSS, Framer Motion\n- **Build:** Vite, Rollup\n\n## Challenges\n\n### Memory Management\n\n**Problem:** Browser crashed with >200k points.\n\n**Solution:**\n- Implemented aggressive object pooling\n- Disposed geometries/materials properly\n- Used WeakMaps for caching\n- Added memory monitoring\n\n### Mobile Performance\n\n**Problem:** Laggy on mobile GPUs.\n\n**Solution:**\n- Reduced particle count on mobile\n- Simplified shaders (no shadows)\n- Disabled post-processing effects\n- Progressive enhancement strategy\n\n## Future Work\n\n- VR mode for immersive exploration\n- Collaborative annotations\n- AI-suggested insights\n- Export to AR for presentations\n\n---\n\n[Try the live demo](https://3d-viz-demo.vercel.app) | [Read the docs](https://github.com/roshankhatri/3d-data-viz)\n",
          "code": "var Component=(()=>{var p=Object.create;var c=Object.defineProperty;var y=Object.getOwnPropertyDescriptor;var B=Object.getOwnPropertyNames;var m=Object.getPrototypeOf,F=Object.prototype.hasOwnProperty;var g=(l,e)=>()=>(e||l((e={exports:{}}).exports,e),e.exports),C=(l,e)=>{for(var r in e)c(l,r,{get:e[r],enumerable:!0})},s=(l,e,r,a)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let i of B(e))!F.call(l,i)&&i!==r&&c(l,i,{get:()=>e[i],enumerable:!(a=y(e,i))||a.enumerable});return l};var u=(l,e,r)=>(r=l!=null?p(m(l)):{},s(e||!l||!l.__esModule?c(r,\"default\",{value:l,enumerable:!0}):r,l)),A=l=>s(c({},\"__esModule\",{value:!0}),l);var t=g((v,o)=>{o.exports=_jsx_runtime});var f={};C(f,{default:()=>h,frontmatter:()=>E});var n=u(t()),E={title:\"3D Data Visualization Dashboard\",summary:\"Interactive WebGL-powered dashboard for exploring complex datasets in 3D space with real-time filtering and immersive analytics.\",cover:\"/images/projects/3d-viz.jpg\",repoUrl:\"https://github.com/roshankhatri/3d-data-viz\",liveUrl:\"https://3d-viz-demo.vercel.app\",tags:[\"3D/WebGL\",\"Data Viz\",\"Frontend\"],stack:[\"Three.js\",\"React\",\"D3.js\",\"WebGL\",\"TypeScript\",\"Tailwind CSS\"],metrics:{lighthouse:94,perfScore:91,users:\"5k+\",uptime:\"99.8%\"},dates:{start:\"2024-04\",end:\"2024-08\"},highlights:[\"Rendered 100k+ data points at 60 FPS\",\"Reduced insights discovery time by 65%\",\"Built custom WebGL shaders for performance\",\"Fully accessible with keyboard navigation\"],published:!0};function d(l){let e={a:\"a\",code:\"code\",figure:\"figure\",h2:\"h2\",h3:\"h3\",hr:\"hr\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",ul:\"ul\",...l.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(e.h2,{id:\"overview\",children:(0,n.jsx)(e.a,{className:\"anchor\",href:\"#overview\",children:\"Overview\"})}),`\n`,(0,n.jsx)(e.p,{children:\"Created an immersive 3D data visualization platform that transforms complex multi-dimensional datasets into intuitive, explorable 3D scenes. Users can fly through their data, filter in real-time, and discover patterns impossible to see in traditional 2D charts.\"}),`\n`,(0,n.jsx)(e.h2,{id:\"the-problem\",children:(0,n.jsx)(e.a,{className:\"anchor\",href:\"#the-problem\",children:\"The Problem\"})}),`\n`,(0,n.jsx)(e.p,{children:\"Traditional dashboards struggle with high-dimensional data:\"}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:\"2D limitations:\"}),\" Hard to show relationships across 3+ dimensions\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:\"Performance:\"}),\" Browser freezes with 10k+ data points\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:\"Engagement:\"}),\" Users don't explore data deeply\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:\"Accessibility:\"}),\" Most 3D visualizations exclude keyboard users\"]}),`\n`]}),`\n`,(0,n.jsx)(e.h2,{id:\"solution\",children:(0,n.jsx)(e.a,{className:\"anchor\",href:\"#solution\",children:\"Solution\"})}),`\n`,(0,n.jsx)(e.h3,{id:\"3d-rendering-engine\",children:(0,n.jsx)(e.a,{className:\"anchor\",href:\"#3d-rendering-engine\",children:\"3D Rendering Engine\"})}),`\n`,(0,n.jsx)(e.p,{children:\"Built on Three.js with custom performance optimizations:\"}),`\n`,(0,n.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.pre,{tabIndex:\"0\",\"data-language\":\"typescript\",\"data-theme\":\"one-dark-pro\",children:(0,n.jsxs)(e.code,{\"data-language\":\"typescript\",\"data-theme\":\"one-dark-pro\",style:{display:\"grid\"},children:[(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#7F848E\",fontStyle:\"italic\"},children:\"// Instanced rendering for 100k particles\"})}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#C678DD\"},children:\"const\"}),(0,n.jsx)(e.span,{style:{color:\"#E5C07B\"},children:\" geometry\"}),(0,n.jsx)(e.span,{style:{color:\"#56B6C2\"},children:\" =\"}),(0,n.jsx)(e.span,{style:{color:\"#C678DD\"},children:\" new\"}),(0,n.jsx)(e.span,{style:{color:\"#E5C07B\"},children:\" THREE\"}),(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#61AFEF\"},children:\"SphereGeometry\"}),(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#D19A66\"},children:\"0.1\"}),(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\", \"}),(0,n.jsx)(e.span,{style:{color:\"#D19A66\"},children:\"8\"}),(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\", \"}),(0,n.jsx)(e.span,{style:{color:\"#D19A66\"},children:\"8\"}),(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\");\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#C678DD\"},children:\"const\"}),(0,n.jsx)(e.span,{style:{color:\"#E5C07B\"},children:\" material\"}),(0,n.jsx)(e.span,{style:{color:\"#56B6C2\"},children:\" =\"}),(0,n.jsx)(e.span,{style:{color:\"#C678DD\"},children:\" new\"}),(0,n.jsx)(e.span,{style:{color:\"#E5C07B\"},children:\" THREE\"}),(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#61AFEF\"},children:\"MeshBasicMaterial\"}),(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\"();\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#C678DD\"},children:\"const\"}),(0,n.jsx)(e.span,{style:{color:\"#E5C07B\"},children:\" mesh\"}),(0,n.jsx)(e.span,{style:{color:\"#56B6C2\"},children:\" =\"}),(0,n.jsx)(e.span,{style:{color:\"#C678DD\"},children:\" new\"}),(0,n.jsx)(e.span,{style:{color:\"#E5C07B\"},children:\" THREE\"}),(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#61AFEF\"},children:\"InstancedMesh\"}),(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#E06C75\"},children:\"geometry\"}),(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\", \"}),(0,n.jsx)(e.span,{style:{color:\"#E06C75\"},children:\"material\"}),(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\", \"}),(0,n.jsx)(e.span,{style:{color:\"#E06C75\"},children:\"count\"}),(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\");\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#7F848E\",fontStyle:\"italic\"},children:\"// Update positions via shader\"})}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#E5C07B\"},children:\"mesh\"}),(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#E5C07B\"},children:\"instanceMatrix\"}),(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#61AFEF\"},children:\"setUsage\"}),(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#E5C07B\"},children:\"THREE\"}),(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#E06C75\"},children:\"DynamicDrawUsage\"}),(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\");\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#7F848E\",fontStyle:\"italic\"},children:\"// GPU-accelerated filtering\"})}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#C678DD\"},children:\"const\"}),(0,n.jsx)(e.span,{style:{color:\"#E5C07B\"},children:\" filterShader\"}),(0,n.jsx)(e.span,{style:{color:\"#56B6C2\"},children:\" =\"}),(0,n.jsx)(e.span,{style:{color:\"#C678DD\"},children:\" new\"}),(0,n.jsx)(e.span,{style:{color:\"#E5C07B\"},children:\" THREE\"}),(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#61AFEF\"},children:\"ShaderMaterial\"}),(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\"({\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#E06C75\"},children:\"  uniforms\"}),(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\": {\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#E06C75\"},children:\"    filterRange\"}),(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\": { \"}),(0,n.jsx)(e.span,{style:{color:\"#E06C75\"},children:\"value\"}),(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\": \"}),(0,n.jsx)(e.span,{style:{color:\"#C678DD\"},children:\"new\"}),(0,n.jsx)(e.span,{style:{color:\"#E5C07B\"},children:\" THREE\"}),(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#61AFEF\"},children:\"Vector2\"}),(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#E06C75\"},children:\"min\"}),(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\", \"}),(0,n.jsx)(e.span,{style:{color:\"#E06C75\"},children:\"max\"}),(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\") },\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\"  },\"})}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#E06C75\"},children:\"  vertexShader\"}),(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\": \"}),(0,n.jsx)(e.span,{style:{color:\"#7F848E\",fontStyle:\"italic\"},children:\"/* GLSL */\"}),(0,n.jsx)(e.span,{style:{color:\"#98C379\"},children:\" `\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#98C379\"},children:\"    attribute float dataValue;\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#98C379\"},children:\"    varying float vVisible;\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#98C379\"},children:\"    uniform vec2 filterRange;\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#98C379\"},children:\"    void main() {\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#98C379\"},children:\"      vVisible = step(filterRange.x, dataValue) * step(dataValue, filterRange.y);\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#98C379\"},children:\"      // ...\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#98C379\"},children:\"    }\"})}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#98C379\"},children:\"  `\"}),(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\",\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\"});\"})})]})})}),`\n`,(0,n.jsx)(e.h3,{id:\"interactive-features\",children:(0,n.jsx)(e.a,{className:\"anchor\",href:\"#interactive-features\",children:\"Interactive Features\"})}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:\"Orbit controls:\"}),\" Smooth camera navigation\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:\"Brush selection:\"}),\" Draw to select data points\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:\"Temporal playback:\"}),\" Animate data over time\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:\"Linked views:\"}),\" 2D charts sync with 3D scene\"]}),`\n`]}),`\n`,(0,n.jsx)(e.h3,{id:\"performance-techniques\",children:(0,n.jsx)(e.a,{className:\"anchor\",href:\"#performance-techniques\",children:\"Performance Techniques\"})}),`\n`,(0,n.jsxs)(e.ol,{children:[`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:\"Level of Detail (LOD):\"}),\" Reduce geometry for distant objects\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:\"Frustum Culling:\"}),\" Only render visible objects\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:\"Octree Spatial Index:\"}),\" Fast spatial queries\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:\"Web Workers:\"}),\" Off-thread data processing\"]}),`\n`]}),`\n`,(0,n.jsx)(e.h2,{id:\"technical-deep-dive\",children:(0,n.jsx)(e.a,{className:\"anchor\",href:\"#technical-deep-dive\",children:\"Technical Deep Dive\"})}),`\n`,(0,n.jsx)(e.h3,{id:\"data-pipeline\",children:(0,n.jsx)(e.a,{className:\"anchor\",href:\"#data-pipeline\",children:\"Data Pipeline\"})}),`\n`,(0,n.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.pre,{tabIndex:\"0\",\"data-language\":\"typescript\",\"data-theme\":\"one-dark-pro\",children:(0,n.jsxs)(e.code,{\"data-language\":\"typescript\",\"data-theme\":\"one-dark-pro\",style:{display:\"grid\"},children:[(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#7F848E\",fontStyle:\"italic\"},children:\"// Transform raw data to 3D positions\"})}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#C678DD\"},children:\"const\"}),(0,n.jsx)(e.span,{style:{color:\"#61AFEF\"},children:\" transform\"}),(0,n.jsx)(e.span,{style:{color:\"#56B6C2\"},children:\" =\"}),(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\" (\"}),(0,n.jsx)(e.span,{style:{color:\"#E06C75\",fontStyle:\"italic\"},children:\"data\"}),(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\": \"}),(0,n.jsx)(e.span,{style:{color:\"#E5C07B\"},children:\"DataPoint\"}),(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\"[]) \"}),(0,n.jsx)(e.span,{style:{color:\"#C678DD\"},children:\"=>\"}),(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\" {\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#7F848E\",fontStyle:\"italic\"},children:\"  // Normalize to [0, 1]\"})}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#C678DD\"},children:\"  const\"}),(0,n.jsx)(e.span,{style:{color:\"#E5C07B\"},children:\" normalized\"}),(0,n.jsx)(e.span,{style:{color:\"#56B6C2\"},children:\" =\"}),(0,n.jsx)(e.span,{style:{color:\"#61AFEF\"},children:\" normalize\"}),(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#E06C75\"},children:\"data\"}),(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\");\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#7F848E\",fontStyle:\"italic\"},children:\"  // Apply dimensionality reduction (PCA/t-SNE)\"})}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#C678DD\"},children:\"  const\"}),(0,n.jsx)(e.span,{style:{color:\"#E5C07B\"},children:\" reduced\"}),(0,n.jsx)(e.span,{style:{color:\"#56B6C2\"},children:\" =\"}),(0,n.jsx)(e.span,{style:{color:\"#61AFEF\"},children:\" applyPCA\"}),(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#E06C75\"},children:\"normalized\"}),(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\", \"}),(0,n.jsx)(e.span,{style:{color:\"#D19A66\"},children:\"3\"}),(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\");\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#7F848E\",fontStyle:\"italic\"},children:\"  // Scale to scene coordinates\"})}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#C678DD\"},children:\"  return\"}),(0,n.jsx)(e.span,{style:{color:\"#E5C07B\"},children:\" reduced\"}),(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#61AFEF\"},children:\"map\"}),(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#E06C75\",fontStyle:\"italic\"},children:\"p\"}),(0,n.jsx)(e.span,{style:{color:\"#C678DD\"},children:\" =>\"}),(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\" ({\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#E06C75\"},children:\"    position\"}),(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\": \"}),(0,n.jsx)(e.span,{style:{color:\"#C678DD\"},children:\"new\"}),(0,n.jsx)(e.span,{style:{color:\"#E5C07B\"},children:\" THREE\"}),(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#61AFEF\"},children:\"Vector3\"}),(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#E5C07B\"},children:\"p\"}),(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#E06C75\"},children:\"x\"}),(0,n.jsx)(e.span,{style:{color:\"#56B6C2\"},children:\" *\"}),(0,n.jsx)(e.span,{style:{color:\"#E06C75\"},children:\" scale\"}),(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\", \"}),(0,n.jsx)(e.span,{style:{color:\"#E5C07B\"},children:\"p\"}),(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#E06C75\"},children:\"y\"}),(0,n.jsx)(e.span,{style:{color:\"#56B6C2\"},children:\" *\"}),(0,n.jsx)(e.span,{style:{color:\"#E06C75\"},children:\" scale\"}),(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\", \"}),(0,n.jsx)(e.span,{style:{color:\"#E5C07B\"},children:\"p\"}),(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#E06C75\"},children:\"z\"}),(0,n.jsx)(e.span,{style:{color:\"#56B6C2\"},children:\" *\"}),(0,n.jsx)(e.span,{style:{color:\"#E06C75\"},children:\" scale\"}),(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\"),\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#E06C75\"},children:\"    color\"}),(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\": \"}),(0,n.jsx)(e.span,{style:{color:\"#61AFEF\"},children:\"colorScale\"}),(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#E5C07B\"},children:\"p\"}),(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#E06C75\"},children:\"category\"}),(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\"),\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#E06C75\"},children:\"    metadata\"}),(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\": \"}),(0,n.jsx)(e.span,{style:{color:\"#E06C75\"},children:\"p\"}),(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\",\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\"  }));\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\"};\"})})]})})}),`\n`,(0,n.jsx)(e.h3,{id:\"accessibility-implementation\",children:(0,n.jsx)(e.a,{className:\"anchor\",href:\"#accessibility-implementation\",children:\"Accessibility Implementation\"})}),`\n`,(0,n.jsx)(e.p,{children:\"Made 3D visualization keyboard-accessible:\"}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:\"Focus management:\"}),\" Tab through data clusters\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:\"Screen reader:\"}),\" Announce focused point details\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:\"Alternative views:\"}),\" Fallback to 2D scatter on demand\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:\"Reduced motion:\"}),\" Disable animations if preferred\"]}),`\n`]}),`\n`,(0,n.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.pre,{tabIndex:\"0\",\"data-language\":\"typescript\",\"data-theme\":\"one-dark-pro\",children:(0,n.jsxs)(e.code,{\"data-language\":\"typescript\",\"data-theme\":\"one-dark-pro\",style:{display:\"grid\"},children:[(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#7F848E\",fontStyle:\"italic\"},children:\"// Keyboard navigation\"})}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#C678DD\"},children:\"const\"}),(0,n.jsx)(e.span,{style:{color:\"#61AFEF\"},children:\" focusNextPoint\"}),(0,n.jsx)(e.span,{style:{color:\"#56B6C2\"},children:\" =\"}),(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\" () \"}),(0,n.jsx)(e.span,{style:{color:\"#C678DD\"},children:\"=>\"}),(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#E06C75\"},children:\"  currentIndex\"}),(0,n.jsx)(e.span,{style:{color:\"#56B6C2\"},children:\" =\"}),(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\" (\"}),(0,n.jsx)(e.span,{style:{color:\"#E06C75\"},children:\"currentIndex\"}),(0,n.jsx)(e.span,{style:{color:\"#56B6C2\"},children:\" +\"}),(0,n.jsx)(e.span,{style:{color:\"#D19A66\"},children:\" 1\"}),(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\") \"}),(0,n.jsx)(e.span,{style:{color:\"#56B6C2\"},children:\"%\"}),(0,n.jsx)(e.span,{style:{color:\"#E5C07B\"},children:\" points\"}),(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#E06C75\"},children:\"length\"}),(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\";\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#C678DD\"},children:\"  const\"}),(0,n.jsx)(e.span,{style:{color:\"#E5C07B\"},children:\" point\"}),(0,n.jsx)(e.span,{style:{color:\"#56B6C2\"},children:\" =\"}),(0,n.jsx)(e.span,{style:{color:\"#E06C75\"},children:\" points\"}),(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\"[\"}),(0,n.jsx)(e.span,{style:{color:\"#E06C75\"},children:\"currentIndex\"}),(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\"];\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#7F848E\",fontStyle:\"italic\"},children:\"  // Move camera to point\"})}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#61AFEF\"},children:\"  animateCameraTo\"}),(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#E5C07B\"},children:\"point\"}),(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#E06C75\"},children:\"position\"}),(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\");\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#7F848E\",fontStyle:\"italic\"},children:\"  // Announce to screen reader\"})}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#61AFEF\"},children:\"  announce\"}),(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#98C379\"},children:\"`\"}),(0,n.jsx)(e.span,{style:{color:\"#C678DD\"},children:\"${\"}),(0,n.jsx)(e.span,{style:{color:\"#E5C07B\"},children:\"point\"}),(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#E06C75\"},children:\"label\"}),(0,n.jsx)(e.span,{style:{color:\"#C678DD\"},children:\"}\"}),(0,n.jsx)(e.span,{style:{color:\"#98C379\"},children:\": \"}),(0,n.jsx)(e.span,{style:{color:\"#C678DD\"},children:\"${\"}),(0,n.jsx)(e.span,{style:{color:\"#E5C07B\"},children:\"point\"}),(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#E06C75\"},children:\"value\"}),(0,n.jsx)(e.span,{style:{color:\"#C678DD\"},children:\"}\"}),(0,n.jsx)(e.span,{style:{color:\"#98C379\"},children:\"`\"}),(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\");\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\"};\"})})]})})}),`\n`,(0,n.jsx)(e.h2,{id:\"results\",children:(0,n.jsx)(e.a,{className:\"anchor\",href:\"#results\",children:\"Results\"})}),`\n`,(0,n.jsx)(e.h3,{id:\"performance\",children:(0,n.jsx)(e.a,{className:\"anchor\",href:\"#performance\",children:\"Performance\"})}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:\"60 FPS\"}),\" with 100k particles\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:\"1.2s initial load\"}),\" on 4G mobile\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:\"<16ms frame time\"}),\" during interaction\"]}),`\n`]}),`\n`,(0,n.jsx)(e.h3,{id:\"user-impact\",children:(0,n.jsx)(e.a,{className:\"anchor\",href:\"#user-impact\",children:\"User Impact\"})}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:\"65% faster\"}),\" insights discovery (user study)\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:\"3x longer\"}),\" average session duration\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:\"89% satisfaction\"}),\" rating from analysts\"]}),`\n`]}),`\n`,(0,n.jsx)(e.h2,{id:\"tech-stack\",children:(0,n.jsx)(e.a,{className:\"anchor\",href:\"#tech-stack\",children:\"Tech Stack\"})}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:\"3D:\"}),\" Three.js, WebGL, GLSL shaders\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:\"Framework:\"}),\" React 18, TypeScript\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:\"Data:\"}),\" D3.js for scales/axes, PCA.js\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:\"UI:\"}),\" Tailwind CSS, Framer Motion\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:\"Build:\"}),\" Vite, Rollup\"]}),`\n`]}),`\n`,(0,n.jsx)(e.h2,{id:\"challenges\",children:(0,n.jsx)(e.a,{className:\"anchor\",href:\"#challenges\",children:\"Challenges\"})}),`\n`,(0,n.jsx)(e.h3,{id:\"memory-management\",children:(0,n.jsx)(e.a,{className:\"anchor\",href:\"#memory-management\",children:\"Memory Management\"})}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:\"Problem:\"}),\" Browser crashed with >200k points.\"]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.strong,{children:\"Solution:\"})}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsx)(e.li,{children:\"Implemented aggressive object pooling\"}),`\n`,(0,n.jsx)(e.li,{children:\"Disposed geometries/materials properly\"}),`\n`,(0,n.jsx)(e.li,{children:\"Used WeakMaps for caching\"}),`\n`,(0,n.jsx)(e.li,{children:\"Added memory monitoring\"}),`\n`]}),`\n`,(0,n.jsx)(e.h3,{id:\"mobile-performance\",children:(0,n.jsx)(e.a,{className:\"anchor\",href:\"#mobile-performance\",children:\"Mobile Performance\"})}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:\"Problem:\"}),\" Laggy on mobile GPUs.\"]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.strong,{children:\"Solution:\"})}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsx)(e.li,{children:\"Reduced particle count on mobile\"}),`\n`,(0,n.jsx)(e.li,{children:\"Simplified shaders (no shadows)\"}),`\n`,(0,n.jsx)(e.li,{children:\"Disabled post-processing effects\"}),`\n`,(0,n.jsx)(e.li,{children:\"Progressive enhancement strategy\"}),`\n`]}),`\n`,(0,n.jsx)(e.h2,{id:\"future-work\",children:(0,n.jsx)(e.a,{className:\"anchor\",href:\"#future-work\",children:\"Future Work\"})}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsx)(e.li,{children:\"VR mode for immersive exploration\"}),`\n`,(0,n.jsx)(e.li,{children:\"Collaborative annotations\"}),`\n`,(0,n.jsx)(e.li,{children:\"AI-suggested insights\"}),`\n`,(0,n.jsx)(e.li,{children:\"Export to AR for presentations\"}),`\n`]}),`\n`,(0,n.jsx)(e.hr,{}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.a,{href:\"https://3d-viz-demo.vercel.app\",children:\"Try the live demo\"}),\" | \",(0,n.jsx)(e.a,{href:\"https://github.com/roshankhatri/3d-data-viz\",children:\"Read the docs\"})]})]})}function h(l={}){let{wrapper:e}=l.components||{};return e?(0,n.jsx)(e,{...l,children:(0,n.jsx)(d,{...l})}):d(l)}return A(f);})();\n;return Component;"
        },
        "_id": "projects/3d-data-viz.mdx",
        "_raw": {
          "sourceFilePath": "projects/3d-data-viz.mdx",
          "sourceFileName": "3d-data-viz.mdx",
          "sourceFileDir": "projects",
          "contentType": "mdx",
          "flattenedPath": "projects/3d-data-viz"
        },
        "type": "Project",
        "slug": "3d-data-viz",
        "readingTime": {
          "text": "3 min read",
          "minutes": 2.715,
          "time": 162900,
          "words": 543
        }
      },
      "documentHash": "1763187508849",
      "hasWarnings": false,
      "documentTypeName": "Project"
    },
    "projects/collab-platform.mdx": {
      "document": {
        "title": "Real-Time Collaborative Platform",
        "summary": "A WebSocket-powered collaborative platform enabling teams to work together in real-time with conflict resolution and presence indicators.",
        "cover": "/images/projects/collab-platform.jpg",
        "repoUrl": "https://github.com/roshankhatri/collab-platform",
        "liveUrl": "https://collab-platform-demo.vercel.app",
        "tags": [
          "Featured",
          "Full-Stack",
          "Real-Time"
        ],
        "stack": [
          "Next.js",
          "TypeScript",
          "WebSockets",
          "PostgreSQL",
          "Redis",
          "Tailwind CSS"
        ],
        "metrics": {
          "lighthouse": 98,
          "perfScore": 95,
          "users": "10k+",
          "uptime": "99.9%"
        },
        "dates": {
          "start": "2024-01",
          "end": "2024-06"
        },
        "highlights": [
          "Achieved sub-100ms latency for real-time updates",
          "Implemented CRDT-based conflict resolution",
          "Scaled to 10,000+ concurrent users",
          "99.9% uptime over 6 months"
        ],
        "published": true,
        "body": {
          "raw": "\n## Overview\n\nBuilt a production-ready collaborative platform that enables distributed teams to work together seamlessly in real-time. The platform handles document editing, presence awareness, and conflict resolution at scale.\n\n## The Problem\n\nTraditional collaboration tools struggle with three key challenges:\n\n1. **Latency:** Updates take too long to propagate to all users\n2. **Conflicts:** Simultaneous edits cause data loss or corruption\n3. **Scale:** Performance degrades rapidly with concurrent users\n\nTeams needed a solution that felt instant, never lost work, and scaled effortlessly.\n\n## Solution Architecture\n\n### Real-Time Infrastructure\n\nImplemented a hybrid architecture combining WebSockets for instant updates and HTTP for reliability:\n\n- **WebSocket Gateway:** Node.js cluster with sticky sessions\n- **Message Queue:** Redis Pub/Sub for cross-server communication\n- **Conflict Resolution:** CRDT (Conflict-free Replicated Data Types)\n- **Presence System:** Heartbeat-based with automatic cleanup\n\n### Data Layer\n\n```typescript\n// Optimistic update pattern\nconst updateDocument = async (delta: Delta) => {\n  // Apply locally immediately\n  applyLocalUpdate(delta);\n\n  // Broadcast to peers\n  broadcastUpdate(delta);\n\n  // Persist to database (eventual consistency)\n  await persistUpdate(delta);\n};\n```\n\n### Performance Optimizations\n\n- **Delta compression:** Only send changes, not full documents\n- **Batching:** Aggregate rapid-fire updates into single messages\n- **Edge caching:** Static assets served from CDN\n- **Connection pooling:** Reuse database connections efficiently\n\n## Technical Challenges\n\n### Challenge 1: Handling Network Partitions\n\n**Problem:** Users on unstable connections would desync from the document state.\n\n**Solution:** Implemented a reconciliation protocol that:\n- Detects missed updates via sequence numbers\n- Fetches missing deltas on reconnection\n- Applies transforms in correct order\n- Validates final state with server checksum\n\n### Challenge 2: Scaling WebSocket Connections\n\n**Problem:** Single server couldn't handle 10k+ concurrent connections.\n\n**Solution:**\n- Horizontal scaling with Redis Pub/Sub\n- Sticky sessions via IP hashing\n- Health checks and automatic failover\n- Connection draining during deploys\n\n### Challenge 3: Race Conditions in Presence\n\n**Problem:** Rapid join/leave events created inconsistent presence state.\n\n**Solution:**\n- Operational Transform for presence updates\n- Idempotent presence messages\n- Vector clocks for causality tracking\n- Periodic full-state sync as fallback\n\n## Results & Impact\n\n### Performance Metrics\n\n- **Latency:** 50-80ms p95 for updates (target: &lt;100ms)\n- **Throughput:** 50,000 messages/second per server\n- **Availability:** 99.95% uptime (target: 99.9%)\n- **Scale:** 15,000 peak concurrent users\n\n### Business Impact\n\n- Reduced collaboration friction by 70% (user survey)\n- Enabled 3x larger team sizes per project\n- Zero data loss incidents in production\n- 4.8/5 average user satisfaction rating\n\n## Tech Stack Deep Dive\n\n**Frontend:**\n- Next.js 14 with React Server Components\n- TanStack Query for client state\n- Tailwind CSS + Radix UI\n- Framer Motion for animations\n\n**Backend:**\n- Node.js with TypeScript\n- WebSocket (ws library) + Express\n- PostgreSQL with connection pooling\n- Redis for pub/sub and caching\n\n**Infrastructure:**\n- Vercel for frontend\n- AWS ECS for WebSocket servers\n- AWS RDS (PostgreSQL)\n- AWS ElastiCache (Redis)\n- CloudWatch for monitoring\n\n## Key Learnings\n\n1. **CRDTs are powerful but complex** - Trade implementation complexity for automatic conflict resolution\n2. **Observability is critical** - Built extensive metrics/logging from day one\n3. **Graceful degradation matters** - System works (degraded) even when WebSockets fail\n4. **Load testing early** - Found scaling issues at 1k users, not 10k\n\n## Future Improvements\n\n- [ ] Implement collaborative cursors with user attribution\n- [ ] Add offline mode with local-first architecture\n- [ ] Optimize bundle size (currently 180KB gzipped)\n- [ ] Add end-to-end encryption for sensitive documents\n\n## Open Source Contributions\n\nThis project led to contributions back to the ecosystem:\n\n- [PR #1234](https://github.com/example/lib) - WebSocket reconnection logic\n- [yjs-redis-adapter](https://github.com/example/yjs-redis) - Redis adapter for Yjs CRDT library\n\n---\n\n**Interested in the technical details?** Check out the [architecture docs](https://github.com/roshankhatri/collab-platform/tree/main/docs) or [live demo](https://collab-platform-demo.vercel.app).\n",
          "code": "var Component=(()=>{var p=Object.create;var t=Object.defineProperty;var u=Object.getOwnPropertyDescriptor;var m=Object.getOwnPropertyNames;var g=Object.getPrototypeOf,f=Object.prototype.hasOwnProperty;var y=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports),b=(r,e)=>{for(var i in e)t(r,i,{get:e[i],enumerable:!0})},a=(r,e,i,c)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let l of m(e))!f.call(r,l)&&l!==i&&t(r,l,{get:()=>e[l],enumerable:!(c=u(e,l))||c.enumerable});return r};var k=(r,e,i)=>(i=r!=null?p(g(r)):{},a(e||!r||!r.__esModule?t(i,\"default\",{value:r,enumerable:!0}):i,r)),S=r=>a(t({},\"__esModule\",{value:!0}),r);var o=y((w,s)=>{s.exports=_jsx_runtime});var B={};b(B,{default:()=>h,frontmatter:()=>v});var n=k(o()),v={title:\"Real-Time Collaborative Platform\",summary:\"A WebSocket-powered collaborative platform enabling teams to work together in real-time with conflict resolution and presence indicators.\",cover:\"/images/projects/collab-platform.jpg\",repoUrl:\"https://github.com/roshankhatri/collab-platform\",liveUrl:\"https://collab-platform-demo.vercel.app\",tags:[\"Featured\",\"Full-Stack\",\"Real-Time\"],stack:[\"Next.js\",\"TypeScript\",\"WebSockets\",\"PostgreSQL\",\"Redis\",\"Tailwind CSS\"],metrics:{lighthouse:98,perfScore:95,users:\"10k+\",uptime:\"99.9%\"},dates:{start:\"2024-01\",end:\"2024-06\"},highlights:[\"Achieved sub-100ms latency for real-time updates\",\"Implemented CRDT-based conflict resolution\",\"Scaled to 10,000+ concurrent users\",\"99.9% uptime over 6 months\"],published:!0};function d(r){let e={a:\"a\",code:\"code\",figure:\"figure\",h2:\"h2\",h3:\"h3\",hr:\"hr\",input:\"input\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",ul:\"ul\",...r.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(e.h2,{id:\"overview\",children:(0,n.jsx)(e.a,{className:\"anchor\",href:\"#overview\",children:\"Overview\"})}),`\n`,(0,n.jsx)(e.p,{children:\"Built a production-ready collaborative platform that enables distributed teams to work together seamlessly in real-time. The platform handles document editing, presence awareness, and conflict resolution at scale.\"}),`\n`,(0,n.jsx)(e.h2,{id:\"the-problem\",children:(0,n.jsx)(e.a,{className:\"anchor\",href:\"#the-problem\",children:\"The Problem\"})}),`\n`,(0,n.jsx)(e.p,{children:\"Traditional collaboration tools struggle with three key challenges:\"}),`\n`,(0,n.jsxs)(e.ol,{children:[`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:\"Latency:\"}),\" Updates take too long to propagate to all users\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:\"Conflicts:\"}),\" Simultaneous edits cause data loss or corruption\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:\"Scale:\"}),\" Performance degrades rapidly with concurrent users\"]}),`\n`]}),`\n`,(0,n.jsx)(e.p,{children:\"Teams needed a solution that felt instant, never lost work, and scaled effortlessly.\"}),`\n`,(0,n.jsx)(e.h2,{id:\"solution-architecture\",children:(0,n.jsx)(e.a,{className:\"anchor\",href:\"#solution-architecture\",children:\"Solution Architecture\"})}),`\n`,(0,n.jsx)(e.h3,{id:\"real-time-infrastructure\",children:(0,n.jsx)(e.a,{className:\"anchor\",href:\"#real-time-infrastructure\",children:\"Real-Time Infrastructure\"})}),`\n`,(0,n.jsx)(e.p,{children:\"Implemented a hybrid architecture combining WebSockets for instant updates and HTTP for reliability:\"}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:\"WebSocket Gateway:\"}),\" Node.js cluster with sticky sessions\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:\"Message Queue:\"}),\" Redis Pub/Sub for cross-server communication\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:\"Conflict Resolution:\"}),\" CRDT (Conflict-free Replicated Data Types)\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:\"Presence System:\"}),\" Heartbeat-based with automatic cleanup\"]}),`\n`]}),`\n`,(0,n.jsx)(e.h3,{id:\"data-layer\",children:(0,n.jsx)(e.a,{className:\"anchor\",href:\"#data-layer\",children:\"Data Layer\"})}),`\n`,(0,n.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.pre,{tabIndex:\"0\",\"data-language\":\"typescript\",\"data-theme\":\"one-dark-pro\",children:(0,n.jsxs)(e.code,{\"data-language\":\"typescript\",\"data-theme\":\"one-dark-pro\",style:{display:\"grid\"},children:[(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#7F848E\",fontStyle:\"italic\"},children:\"// Optimistic update pattern\"})}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#C678DD\"},children:\"const\"}),(0,n.jsx)(e.span,{style:{color:\"#61AFEF\"},children:\" updateDocument\"}),(0,n.jsx)(e.span,{style:{color:\"#56B6C2\"},children:\" =\"}),(0,n.jsx)(e.span,{style:{color:\"#C678DD\"},children:\" async\"}),(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\" (\"}),(0,n.jsx)(e.span,{style:{color:\"#E06C75\",fontStyle:\"italic\"},children:\"delta\"}),(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\": \"}),(0,n.jsx)(e.span,{style:{color:\"#E5C07B\"},children:\"Delta\"}),(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\") \"}),(0,n.jsx)(e.span,{style:{color:\"#C678DD\"},children:\"=>\"}),(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\" {\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#7F848E\",fontStyle:\"italic\"},children:\"  // Apply locally immediately\"})}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#61AFEF\"},children:\"  applyLocalUpdate\"}),(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#E06C75\"},children:\"delta\"}),(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\");\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#7F848E\",fontStyle:\"italic\"},children:\"  // Broadcast to peers\"})}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#61AFEF\"},children:\"  broadcastUpdate\"}),(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#E06C75\"},children:\"delta\"}),(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\");\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#7F848E\",fontStyle:\"italic\"},children:\"  // Persist to database (eventual consistency)\"})}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#C678DD\"},children:\"  await\"}),(0,n.jsx)(e.span,{style:{color:\"#61AFEF\"},children:\" persistUpdate\"}),(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#E06C75\"},children:\"delta\"}),(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\");\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\"};\"})})]})})}),`\n`,(0,n.jsx)(e.h3,{id:\"performance-optimizations\",children:(0,n.jsx)(e.a,{className:\"anchor\",href:\"#performance-optimizations\",children:\"Performance Optimizations\"})}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:\"Delta compression:\"}),\" Only send changes, not full documents\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:\"Batching:\"}),\" Aggregate rapid-fire updates into single messages\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:\"Edge caching:\"}),\" Static assets served from CDN\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:\"Connection pooling:\"}),\" Reuse database connections efficiently\"]}),`\n`]}),`\n`,(0,n.jsx)(e.h2,{id:\"technical-challenges\",children:(0,n.jsx)(e.a,{className:\"anchor\",href:\"#technical-challenges\",children:\"Technical Challenges\"})}),`\n`,(0,n.jsx)(e.h3,{id:\"challenge-1-handling-network-partitions\",children:(0,n.jsx)(e.a,{className:\"anchor\",href:\"#challenge-1-handling-network-partitions\",children:\"Challenge 1: Handling Network Partitions\"})}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:\"Problem:\"}),\" Users on unstable connections would desync from the document state.\"]}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:\"Solution:\"}),\" Implemented a reconciliation protocol that:\"]}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsx)(e.li,{children:\"Detects missed updates via sequence numbers\"}),`\n`,(0,n.jsx)(e.li,{children:\"Fetches missing deltas on reconnection\"}),`\n`,(0,n.jsx)(e.li,{children:\"Applies transforms in correct order\"}),`\n`,(0,n.jsx)(e.li,{children:\"Validates final state with server checksum\"}),`\n`]}),`\n`,(0,n.jsx)(e.h3,{id:\"challenge-2-scaling-websocket-connections\",children:(0,n.jsx)(e.a,{className:\"anchor\",href:\"#challenge-2-scaling-websocket-connections\",children:\"Challenge 2: Scaling WebSocket Connections\"})}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:\"Problem:\"}),\" Single server couldn't handle 10k+ concurrent connections.\"]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.strong,{children:\"Solution:\"})}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsx)(e.li,{children:\"Horizontal scaling with Redis Pub/Sub\"}),`\n`,(0,n.jsx)(e.li,{children:\"Sticky sessions via IP hashing\"}),`\n`,(0,n.jsx)(e.li,{children:\"Health checks and automatic failover\"}),`\n`,(0,n.jsx)(e.li,{children:\"Connection draining during deploys\"}),`\n`]}),`\n`,(0,n.jsx)(e.h3,{id:\"challenge-3-race-conditions-in-presence\",children:(0,n.jsx)(e.a,{className:\"anchor\",href:\"#challenge-3-race-conditions-in-presence\",children:\"Challenge 3: Race Conditions in Presence\"})}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:\"Problem:\"}),\" Rapid join/leave events created inconsistent presence state.\"]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.strong,{children:\"Solution:\"})}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsx)(e.li,{children:\"Operational Transform for presence updates\"}),`\n`,(0,n.jsx)(e.li,{children:\"Idempotent presence messages\"}),`\n`,(0,n.jsx)(e.li,{children:\"Vector clocks for causality tracking\"}),`\n`,(0,n.jsx)(e.li,{children:\"Periodic full-state sync as fallback\"}),`\n`]}),`\n`,(0,n.jsx)(e.h2,{id:\"results--impact\",children:(0,n.jsx)(e.a,{className:\"anchor\",href:\"#results--impact\",children:\"Results & Impact\"})}),`\n`,(0,n.jsx)(e.h3,{id:\"performance-metrics\",children:(0,n.jsx)(e.a,{className:\"anchor\",href:\"#performance-metrics\",children:\"Performance Metrics\"})}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:\"Latency:\"}),\" 50-80ms p95 for updates (target: <100ms)\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:\"Throughput:\"}),\" 50,000 messages/second per server\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:\"Availability:\"}),\" 99.95% uptime (target: 99.9%)\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:\"Scale:\"}),\" 15,000 peak concurrent users\"]}),`\n`]}),`\n`,(0,n.jsx)(e.h3,{id:\"business-impact\",children:(0,n.jsx)(e.a,{className:\"anchor\",href:\"#business-impact\",children:\"Business Impact\"})}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsx)(e.li,{children:\"Reduced collaboration friction by 70% (user survey)\"}),`\n`,(0,n.jsx)(e.li,{children:\"Enabled 3x larger team sizes per project\"}),`\n`,(0,n.jsx)(e.li,{children:\"Zero data loss incidents in production\"}),`\n`,(0,n.jsx)(e.li,{children:\"4.8/5 average user satisfaction rating\"}),`\n`]}),`\n`,(0,n.jsx)(e.h2,{id:\"tech-stack-deep-dive\",children:(0,n.jsx)(e.a,{className:\"anchor\",href:\"#tech-stack-deep-dive\",children:\"Tech Stack Deep Dive\"})}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.strong,{children:\"Frontend:\"})}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsx)(e.li,{children:\"Next.js 14 with React Server Components\"}),`\n`,(0,n.jsx)(e.li,{children:\"TanStack Query for client state\"}),`\n`,(0,n.jsx)(e.li,{children:\"Tailwind CSS + Radix UI\"}),`\n`,(0,n.jsx)(e.li,{children:\"Framer Motion for animations\"}),`\n`]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.strong,{children:\"Backend:\"})}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsx)(e.li,{children:\"Node.js with TypeScript\"}),`\n`,(0,n.jsx)(e.li,{children:\"WebSocket (ws library) + Express\"}),`\n`,(0,n.jsx)(e.li,{children:\"PostgreSQL with connection pooling\"}),`\n`,(0,n.jsx)(e.li,{children:\"Redis for pub/sub and caching\"}),`\n`]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.strong,{children:\"Infrastructure:\"})}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsx)(e.li,{children:\"Vercel for frontend\"}),`\n`,(0,n.jsx)(e.li,{children:\"AWS ECS for WebSocket servers\"}),`\n`,(0,n.jsx)(e.li,{children:\"AWS RDS (PostgreSQL)\"}),`\n`,(0,n.jsx)(e.li,{children:\"AWS ElastiCache (Redis)\"}),`\n`,(0,n.jsx)(e.li,{children:\"CloudWatch for monitoring\"}),`\n`]}),`\n`,(0,n.jsx)(e.h2,{id:\"key-learnings\",children:(0,n.jsx)(e.a,{className:\"anchor\",href:\"#key-learnings\",children:\"Key Learnings\"})}),`\n`,(0,n.jsxs)(e.ol,{children:[`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:\"CRDTs are powerful but complex\"}),\" - Trade implementation complexity for automatic conflict resolution\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:\"Observability is critical\"}),\" - Built extensive metrics/logging from day one\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:\"Graceful degradation matters\"}),\" - System works (degraded) even when WebSockets fail\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:\"Load testing early\"}),\" - Found scaling issues at 1k users, not 10k\"]}),`\n`]}),`\n`,(0,n.jsx)(e.h2,{id:\"future-improvements\",children:(0,n.jsx)(e.a,{className:\"anchor\",href:\"#future-improvements\",children:\"Future Improvements\"})}),`\n`,(0,n.jsxs)(e.ul,{className:\"contains-task-list\",children:[`\n`,(0,n.jsxs)(e.li,{className:\"task-list-item\",children:[(0,n.jsx)(e.input,{type:\"checkbox\",disabled:!0}),\" \",\"Implement collaborative cursors with user attribution\"]}),`\n`,(0,n.jsxs)(e.li,{className:\"task-list-item\",children:[(0,n.jsx)(e.input,{type:\"checkbox\",disabled:!0}),\" \",\"Add offline mode with local-first architecture\"]}),`\n`,(0,n.jsxs)(e.li,{className:\"task-list-item\",children:[(0,n.jsx)(e.input,{type:\"checkbox\",disabled:!0}),\" \",\"Optimize bundle size (currently 180KB gzipped)\"]}),`\n`,(0,n.jsxs)(e.li,{className:\"task-list-item\",children:[(0,n.jsx)(e.input,{type:\"checkbox\",disabled:!0}),\" \",\"Add end-to-end encryption for sensitive documents\"]}),`\n`]}),`\n`,(0,n.jsx)(e.h2,{id:\"open-source-contributions\",children:(0,n.jsx)(e.a,{className:\"anchor\",href:\"#open-source-contributions\",children:\"Open Source Contributions\"})}),`\n`,(0,n.jsx)(e.p,{children:\"This project led to contributions back to the ecosystem:\"}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.a,{href:\"https://github.com/example/lib\",children:\"PR #1234\"}),\" - WebSocket reconnection logic\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.a,{href:\"https://github.com/example/yjs-redis\",children:\"yjs-redis-adapter\"}),\" - Redis adapter for Yjs CRDT library\"]}),`\n`]}),`\n`,(0,n.jsx)(e.hr,{}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:\"Interested in the technical details?\"}),\" Check out the \",(0,n.jsx)(e.a,{href:\"https://github.com/roshankhatri/collab-platform/tree/main/docs\",children:\"architecture docs\"}),\" or \",(0,n.jsx)(e.a,{href:\"https://collab-platform-demo.vercel.app\",children:\"live demo\"}),\".\"]})]})}function h(r={}){let{wrapper:e}=r.components||{};return e?(0,n.jsx)(e,{...r,children:(0,n.jsx)(d,{...r})}):d(r)}return S(B);})();\n;return Component;"
        },
        "_id": "projects/collab-platform.mdx",
        "_raw": {
          "sourceFilePath": "projects/collab-platform.mdx",
          "sourceFileName": "collab-platform.mdx",
          "sourceFileDir": "projects",
          "contentType": "mdx",
          "flattenedPath": "projects/collab-platform"
        },
        "type": "Project",
        "slug": "collab-platform",
        "readingTime": {
          "text": "4 min read",
          "minutes": 3.025,
          "time": 181500,
          "words": 605
        }
      },
      "documentHash": "1763187508466",
      "hasWarnings": false,
      "documentTypeName": "Project"
    },
    "projects/ecommerce-ai.mdx": {
      "document": {
        "title": "E-Commerce Platform with AI Recommendations",
        "summary": "Next-generation e-commerce platform featuring AI-powered product recommendations, real-time inventory, and sub-second search across millions of products.",
        "cover": "/images/projects/ecommerce-ai.jpg",
        "repoUrl": "https://github.com/roshankhatri/ecommerce-ai",
        "liveUrl": "https://shop-demo.example.com",
        "tags": [
          "Featured",
          "AI/ML",
          "E-Commerce"
        ],
        "stack": [
          "Next.js",
          "Python",
          "TensorFlow",
          "Elasticsearch",
          "Stripe",
          "PostgreSQL"
        ],
        "metrics": {
          "lighthouse": 96,
          "perfScore": 92,
          "users": "50k+",
          "uptime": "99.95%"
        },
        "dates": {
          "start": "2023-09",
          "end": "2024-03"
        },
        "highlights": [
          "35% increase in average order value via AI recommendations",
          "Sub-200ms search latency across 5M products",
          "Processed $2M+ in transactions",
          "Built ML pipeline with 89% recommendation accuracy"
        ],
        "published": true,
        "body": {
          "raw": "\n## Overview\n\nDeveloped a modern e-commerce platform that combines cutting-edge machine learning with exceptional user experience. The system handles millions of products, provides instant search, and drives revenue through intelligent recommendations.\n\n## The Challenge\n\nTraditional e-commerce platforms suffer from:\n\n- **Poor discovery:** Users can't find products they'd love\n- **Slow search:** Full-text search doesn't scale to millions of SKUs\n- **Generic experience:** One-size-fits-all product displays\n- **Cart abandonment:** 70%+ of carts never convert\n\nNeeded a system that felt personal, fast, and conversion-optimized.\n\n## Solution\n\n### AI Recommendation Engine\n\nBuilt a hybrid recommendation system combining:\n\n**Collaborative Filtering:**\n```python\n# User-item matrix factorization\nmodel = NMF(n_components=50, random_state=42)\nuser_features = model.fit_transform(user_item_matrix)\nitem_features = model.components_\n\n# Generate recommendations\nrecommendations = user_features @ item_features\n```\n\n**Content-Based Filtering:**\n- Product embeddings via TF-IDF and Word2Vec\n- Cosine similarity for related products\n- Category and attribute matching\n\n**Contextual Bandits:**\n- Real-time A/B testing of recommendations\n- Thompson Sampling for exploration/exploitation\n- Personalized based on session behavior\n\n### Search Infrastructure\n\nImplemented Elasticsearch with custom scoring:\n\n```javascript\n{\n  \"query\": {\n    \"function_score\": {\n      \"query\": { \"multi_match\": { \"query\": \"laptop\", \"fields\": [\"title^3\", \"description\", \"tags^2\"] } },\n      \"functions\": [\n        { \"field_value_factor\": { \"field\": \"popularity\", \"modifier\": \"log1p\" } },\n        { \"gauss\": { \"price\": { \"origin\": user.budget, \"scale\": 200 } } }\n      ],\n      \"boost_mode\": \"multiply\"\n    }\n  }\n}\n```\n\nPerformance optimizations:\n- Index sharding by category\n- Autocomplete via edge n-grams\n- Faceted search with aggregations\n- Query caching for common searches\n\n## Technical Implementation\n\n### Architecture\n\n```\n┌─────────────┐\n│   Next.js   │ ← Frontend (React 18, Server Components)\n└──────┬──────┘\n       │\n┌──────▼──────────────────────┐\n│   API Gateway (Node.js)     │\n└──┬────────┬─────────┬────────┘\n   │        │         │\n   ▼        ▼         ▼\n┌─────┐ ┌──────┐ ┌─────────┐\n│ DB  │ │ ML   │ │ Search  │\n│(PG) │ │(Fast │ │(Elastic)│\n└─────┘ │API)  │ └─────────┘\n        └──────┘\n```\n\n### ML Pipeline\n\n1. **Data Collection:** Track views, clicks, purchases, ratings\n2. **Feature Engineering:** Extract user/product features\n3. **Model Training:** Weekly batch training on historical data\n4. **Serving:** FastAPI endpoint with &lt;50ms p95 latency\n5. **Monitoring:** Track recommendation CTR and conversion rate\n\n### Performance Optimizations\n\n**Frontend:**\n- React Server Components for initial HTML\n- Streaming SSR for faster TTFB\n- Optimistic UI updates\n- Image optimization (AVIF/WebP, lazy loading)\n\n**Backend:**\n- Database connection pooling\n- Redis caching for product data\n- CDN for static assets\n- Edge functions for geo-routing\n\n## Results\n\n### Performance\n\n- **Search Latency:** 150ms p95 (down from 2s)\n- **Recommendation Latency:** 45ms p95\n- **Page Load:** LCP 1.1s on mobile 4G\n- **Uptime:** 99.95% over 6 months\n\n### Business Impact\n\n- **35% higher AOV** for users clicking recommendations\n- **22% increase** in conversion rate\n- **40% lower** bounce rate on search results\n- **$2.1M revenue** in first 6 months\n\n### ML Metrics\n\n- **89% accuracy** on held-out test set\n- **12% click-through rate** on recommendations\n- **3.2x higher** conversion vs. random suggestions\n\n## Tech Stack\n\n**Frontend:** Next.js 14, TypeScript, Tailwind CSS, Framer Motion\n**Backend:** Node.js, Express, Python (FastAPI)\n**ML:** TensorFlow, scikit-learn, NumPy, Pandas\n**Database:** PostgreSQL, Redis\n**Search:** Elasticsearch\n**Payments:** Stripe\n**Infrastructure:** Vercel, AWS (EC2, RDS, S3), CloudFlare\n\n## Challenges Overcome\n\n### Cold Start Problem\n\nNew users had no recommendation history.\n\n**Solution:**\n- Popularity-based fallback\n- Category affinity from browsing\n- Demographic-based defaults\n- Quick onboarding quiz (optional)\n\n### Model Staleness\n\nProduct catalog changed daily; models trained weekly.\n\n**Solution:**\n- Real-time feature updates in Redis\n- Hybrid online/offline learning\n- Boosting for new products\n- Automatic retraining triggers\n\n### Search Relevance\n\nGeneric keyword matching returned poor results.\n\n**Solution:**\n- Custom scoring with business rules\n- Query expansion (synonyms, misspellings)\n- Personalized ranking\n- Manual tuning for top queries\n\n## Future Enhancements\n\n- Visual search (image → products)\n- Voice search integration\n- Predictive inventory management\n- Multi-language support\n- AR try-on for fashion items\n\n---\n\n**Want to explore?** Check out the [live demo](https://shop-demo.example.com) or [read the ML pipeline docs](https://github.com/roshankhatri/ecommerce-ai/blob/main/docs/ml-pipeline.md).\n",
          "code": "var Component=(()=>{var p=Object.create;var c=Object.defineProperty;var m=Object.getOwnPropertyDescriptor;var u=Object.getOwnPropertyNames;var g=Object.getPrototypeOf,B=Object.prototype.hasOwnProperty;var y=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports),f=(r,e)=>{for(var l in e)c(r,l,{get:e[l],enumerable:!0})},a=(r,e,l,o)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let i of u(e))!B.call(r,i)&&i!==l&&c(r,i,{get:()=>e[i],enumerable:!(o=m(e,i))||o.enumerable});return r};var F=(r,e,l)=>(l=r!=null?p(g(r)):{},a(e||!r||!r.__esModule?c(l,\"default\",{value:r,enumerable:!0}):l,r)),A=r=>a(c({},\"__esModule\",{value:!0}),r);var t=y((S,s)=>{s.exports=_jsx_runtime});var v={};f(v,{default:()=>h,frontmatter:()=>C});var n=F(t()),C={title:\"E-Commerce Platform with AI Recommendations\",summary:\"Next-generation e-commerce platform featuring AI-powered product recommendations, real-time inventory, and sub-second search across millions of products.\",cover:\"/images/projects/ecommerce-ai.jpg\",repoUrl:\"https://github.com/roshankhatri/ecommerce-ai\",liveUrl:\"https://shop-demo.example.com\",tags:[\"Featured\",\"AI/ML\",\"E-Commerce\"],stack:[\"Next.js\",\"Python\",\"TensorFlow\",\"Elasticsearch\",\"Stripe\",\"PostgreSQL\"],metrics:{lighthouse:96,perfScore:92,users:\"50k+\",uptime:\"99.95%\"},dates:{start:\"2023-09\",end:\"2024-03\"},highlights:[\"35% increase in average order value via AI recommendations\",\"Sub-200ms search latency across 5M products\",\"Processed $2M+ in transactions\",\"Built ML pipeline with 89% recommendation accuracy\"],published:!0};function d(r){let e={a:\"a\",code:\"code\",figure:\"figure\",h2:\"h2\",h3:\"h3\",hr:\"hr\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",ul:\"ul\",...r.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(e.h2,{id:\"overview\",children:(0,n.jsx)(e.a,{className:\"anchor\",href:\"#overview\",children:\"Overview\"})}),`\n`,(0,n.jsx)(e.p,{children:\"Developed a modern e-commerce platform that combines cutting-edge machine learning with exceptional user experience. The system handles millions of products, provides instant search, and drives revenue through intelligent recommendations.\"}),`\n`,(0,n.jsx)(e.h2,{id:\"the-challenge\",children:(0,n.jsx)(e.a,{className:\"anchor\",href:\"#the-challenge\",children:\"The Challenge\"})}),`\n`,(0,n.jsx)(e.p,{children:\"Traditional e-commerce platforms suffer from:\"}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:\"Poor discovery:\"}),\" Users can't find products they'd love\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:\"Slow search:\"}),\" Full-text search doesn't scale to millions of SKUs\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:\"Generic experience:\"}),\" One-size-fits-all product displays\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:\"Cart abandonment:\"}),\" 70%+ of carts never convert\"]}),`\n`]}),`\n`,(0,n.jsx)(e.p,{children:\"Needed a system that felt personal, fast, and conversion-optimized.\"}),`\n`,(0,n.jsx)(e.h2,{id:\"solution\",children:(0,n.jsx)(e.a,{className:\"anchor\",href:\"#solution\",children:\"Solution\"})}),`\n`,(0,n.jsx)(e.h3,{id:\"ai-recommendation-engine\",children:(0,n.jsx)(e.a,{className:\"anchor\",href:\"#ai-recommendation-engine\",children:\"AI Recommendation Engine\"})}),`\n`,(0,n.jsx)(e.p,{children:\"Built a hybrid recommendation system combining:\"}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.strong,{children:\"Collaborative Filtering:\"})}),`\n`,(0,n.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.pre,{tabIndex:\"0\",\"data-language\":\"python\",\"data-theme\":\"one-dark-pro\",children:(0,n.jsxs)(e.code,{\"data-language\":\"python\",\"data-theme\":\"one-dark-pro\",style:{display:\"grid\"},children:[(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#7F848E\",fontStyle:\"italic\"},children:\"# User-item matrix factorization\"})}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\"model \"}),(0,n.jsx)(e.span,{style:{color:\"#56B6C2\"},children:\"=\"}),(0,n.jsx)(e.span,{style:{color:\"#61AFEF\"},children:\" NMF\"}),(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#E06C75\",fontStyle:\"italic\"},children:\"n_components\"}),(0,n.jsx)(e.span,{style:{color:\"#56B6C2\"},children:\"=\"}),(0,n.jsx)(e.span,{style:{color:\"#D19A66\"},children:\"50\"}),(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\", \"}),(0,n.jsx)(e.span,{style:{color:\"#E06C75\",fontStyle:\"italic\"},children:\"random_state\"}),(0,n.jsx)(e.span,{style:{color:\"#56B6C2\"},children:\"=\"}),(0,n.jsx)(e.span,{style:{color:\"#D19A66\"},children:\"42\"}),(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\")\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\"user_features \"}),(0,n.jsx)(e.span,{style:{color:\"#56B6C2\"},children:\"=\"}),(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\" model.\"}),(0,n.jsx)(e.span,{style:{color:\"#61AFEF\"},children:\"fit_transform\"}),(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\"(user_item_matrix)\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\"item_features \"}),(0,n.jsx)(e.span,{style:{color:\"#56B6C2\"},children:\"=\"}),(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\" model.components_\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#7F848E\",fontStyle:\"italic\"},children:\"# Generate recommendations\"})}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\"recommendations \"}),(0,n.jsx)(e.span,{style:{color:\"#56B6C2\"},children:\"=\"}),(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\" user_features \"}),(0,n.jsx)(e.span,{style:{color:\"#56B6C2\"},children:\"@\"}),(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\" item_features\"})]})]})})}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.strong,{children:\"Content-Based Filtering:\"})}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsx)(e.li,{children:\"Product embeddings via TF-IDF and Word2Vec\"}),`\n`,(0,n.jsx)(e.li,{children:\"Cosine similarity for related products\"}),`\n`,(0,n.jsx)(e.li,{children:\"Category and attribute matching\"}),`\n`]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.strong,{children:\"Contextual Bandits:\"})}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsx)(e.li,{children:\"Real-time A/B testing of recommendations\"}),`\n`,(0,n.jsx)(e.li,{children:\"Thompson Sampling for exploration/exploitation\"}),`\n`,(0,n.jsx)(e.li,{children:\"Personalized based on session behavior\"}),`\n`]}),`\n`,(0,n.jsx)(e.h3,{id:\"search-infrastructure\",children:(0,n.jsx)(e.a,{className:\"anchor\",href:\"#search-infrastructure\",children:\"Search Infrastructure\"})}),`\n`,(0,n.jsx)(e.p,{children:\"Implemented Elasticsearch with custom scoring:\"}),`\n`,(0,n.jsx)(e.figure,{\"data-rehype-pretty-code-figure\":\"\",children:(0,n.jsx)(e.pre,{tabIndex:\"0\",\"data-language\":\"javascript\",\"data-theme\":\"one-dark-pro\",children:(0,n.jsxs)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"one-dark-pro\",style:{display:\"grid\"},children:[(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\"{\"})}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#98C379\"},children:'  \"query\"'}),(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\": {\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#98C379\"},children:'    \"function_score\"'}),(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\": {\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#98C379\"},children:'      \"query\"'}),(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\": { \"}),(0,n.jsx)(e.span,{style:{color:\"#98C379\"},children:'\"multi_match\"'}),(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\": { \"}),(0,n.jsx)(e.span,{style:{color:\"#98C379\"},children:'\"query\"'}),(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\": \"}),(0,n.jsx)(e.span,{style:{color:\"#98C379\"},children:'\"laptop\"'}),(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\", \"}),(0,n.jsx)(e.span,{style:{color:\"#98C379\"},children:'\"fields\"'}),(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\": [\"}),(0,n.jsx)(e.span,{style:{color:\"#98C379\"},children:'\"title^3\"'}),(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\", \"}),(0,n.jsx)(e.span,{style:{color:\"#98C379\"},children:'\"description\"'}),(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\", \"}),(0,n.jsx)(e.span,{style:{color:\"#98C379\"},children:'\"tags^2\"'}),(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\"] } },\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#98C379\"},children:'      \"functions\"'}),(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\": [\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\"        { \"}),(0,n.jsx)(e.span,{style:{color:\"#98C379\"},children:'\"field_value_factor\"'}),(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\": { \"}),(0,n.jsx)(e.span,{style:{color:\"#98C379\"},children:'\"field\"'}),(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\": \"}),(0,n.jsx)(e.span,{style:{color:\"#98C379\"},children:'\"popularity\"'}),(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\", \"}),(0,n.jsx)(e.span,{style:{color:\"#98C379\"},children:'\"modifier\"'}),(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\": \"}),(0,n.jsx)(e.span,{style:{color:\"#98C379\"},children:'\"log1p\"'}),(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\" } },\"})]}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\"        { \"}),(0,n.jsx)(e.span,{style:{color:\"#98C379\"},children:'\"gauss\"'}),(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\": { \"}),(0,n.jsx)(e.span,{style:{color:\"#98C379\"},children:'\"price\"'}),(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\": { \"}),(0,n.jsx)(e.span,{style:{color:\"#98C379\"},children:'\"origin\"'}),(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\": \"}),(0,n.jsx)(e.span,{style:{color:\"#E5C07B\"},children:\"user\"}),(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#E06C75\"},children:\"budget\"}),(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\", \"}),(0,n.jsx)(e.span,{style:{color:\"#98C379\"},children:'\"scale\"'}),(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\": \"}),(0,n.jsx)(e.span,{style:{color:\"#D19A66\"},children:\"200\"}),(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\" } } }\"})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\"      ],\"})}),`\n`,(0,n.jsxs)(e.span,{\"data-line\":\"\",children:[(0,n.jsx)(e.span,{style:{color:\"#98C379\"},children:'      \"boost_mode\"'}),(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\": \"}),(0,n.jsx)(e.span,{style:{color:\"#98C379\"},children:'\"multiply\"'})]}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\"    }\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\"  }\"})}),`\n`,(0,n.jsx)(e.span,{\"data-line\":\"\",children:(0,n.jsx)(e.span,{style:{color:\"#ABB2BF\"},children:\"}\"})})]})})}),`\n`,(0,n.jsx)(e.p,{children:\"Performance optimizations:\"}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsx)(e.li,{children:\"Index sharding by category\"}),`\n`,(0,n.jsx)(e.li,{children:\"Autocomplete via edge n-grams\"}),`\n`,(0,n.jsx)(e.li,{children:\"Faceted search with aggregations\"}),`\n`,(0,n.jsx)(e.li,{children:\"Query caching for common searches\"}),`\n`]}),`\n`,(0,n.jsx)(e.h2,{id:\"technical-implementation\",children:(0,n.jsx)(e.a,{className:\"anchor\",href:\"#technical-implementation\",children:\"Technical Implementation\"})}),`\n`,(0,n.jsx)(e.h3,{id:\"architecture\",children:(0,n.jsx)(e.a,{className:\"anchor\",href:\"#architecture\",children:\"Architecture\"})}),`\n`,(0,n.jsx)(e.pre,{children:(0,n.jsx)(e.code,{children:`\\u250C\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2510\n\\u2502   Next.js   \\u2502 \\u2190 Frontend (React 18, Server Components)\n\\u2514\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u252C\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2518\n       \\u2502\n\\u250C\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u25BC\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2510\n\\u2502   API Gateway (Node.js)     \\u2502\n\\u2514\\u2500\\u2500\\u252C\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u252C\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u252C\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2518\n   \\u2502        \\u2502         \\u2502\n   \\u25BC        \\u25BC         \\u25BC\n\\u250C\\u2500\\u2500\\u2500\\u2500\\u2500\\u2510 \\u250C\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2510 \\u250C\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2510\n\\u2502 DB  \\u2502 \\u2502 ML   \\u2502 \\u2502 Search  \\u2502\n\\u2502(PG) \\u2502 \\u2502(Fast \\u2502 \\u2502(Elastic)\\u2502\n\\u2514\\u2500\\u2500\\u2500\\u2500\\u2500\\u2518 \\u2502API)  \\u2502 \\u2514\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2518\n        \\u2514\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2518\n`})}),`\n`,(0,n.jsx)(e.h3,{id:\"ml-pipeline\",children:(0,n.jsx)(e.a,{className:\"anchor\",href:\"#ml-pipeline\",children:\"ML Pipeline\"})}),`\n`,(0,n.jsxs)(e.ol,{children:[`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:\"Data Collection:\"}),\" Track views, clicks, purchases, ratings\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:\"Feature Engineering:\"}),\" Extract user/product features\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:\"Model Training:\"}),\" Weekly batch training on historical data\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:\"Serving:\"}),\" FastAPI endpoint with <50ms p95 latency\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:\"Monitoring:\"}),\" Track recommendation CTR and conversion rate\"]}),`\n`]}),`\n`,(0,n.jsx)(e.h3,{id:\"performance-optimizations\",children:(0,n.jsx)(e.a,{className:\"anchor\",href:\"#performance-optimizations\",children:\"Performance Optimizations\"})}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.strong,{children:\"Frontend:\"})}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsx)(e.li,{children:\"React Server Components for initial HTML\"}),`\n`,(0,n.jsx)(e.li,{children:\"Streaming SSR for faster TTFB\"}),`\n`,(0,n.jsx)(e.li,{children:\"Optimistic UI updates\"}),`\n`,(0,n.jsx)(e.li,{children:\"Image optimization (AVIF/WebP, lazy loading)\"}),`\n`]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.strong,{children:\"Backend:\"})}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsx)(e.li,{children:\"Database connection pooling\"}),`\n`,(0,n.jsx)(e.li,{children:\"Redis caching for product data\"}),`\n`,(0,n.jsx)(e.li,{children:\"CDN for static assets\"}),`\n`,(0,n.jsx)(e.li,{children:\"Edge functions for geo-routing\"}),`\n`]}),`\n`,(0,n.jsx)(e.h2,{id:\"results\",children:(0,n.jsx)(e.a,{className:\"anchor\",href:\"#results\",children:\"Results\"})}),`\n`,(0,n.jsx)(e.h3,{id:\"performance\",children:(0,n.jsx)(e.a,{className:\"anchor\",href:\"#performance\",children:\"Performance\"})}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:\"Search Latency:\"}),\" 150ms p95 (down from 2s)\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:\"Recommendation Latency:\"}),\" 45ms p95\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:\"Page Load:\"}),\" LCP 1.1s on mobile 4G\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:\"Uptime:\"}),\" 99.95% over 6 months\"]}),`\n`]}),`\n`,(0,n.jsx)(e.h3,{id:\"business-impact\",children:(0,n.jsx)(e.a,{className:\"anchor\",href:\"#business-impact\",children:\"Business Impact\"})}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:\"35% higher AOV\"}),\" for users clicking recommendations\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:\"22% increase\"}),\" in conversion rate\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:\"40% lower\"}),\" bounce rate on search results\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:\"$2.1M revenue\"}),\" in first 6 months\"]}),`\n`]}),`\n`,(0,n.jsx)(e.h3,{id:\"ml-metrics\",children:(0,n.jsx)(e.a,{className:\"anchor\",href:\"#ml-metrics\",children:\"ML Metrics\"})}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:\"89% accuracy\"}),\" on held-out test set\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:\"12% click-through rate\"}),\" on recommendations\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:\"3.2x higher\"}),\" conversion vs. random suggestions\"]}),`\n`]}),`\n`,(0,n.jsx)(e.h2,{id:\"tech-stack\",children:(0,n.jsx)(e.a,{className:\"anchor\",href:\"#tech-stack\",children:\"Tech Stack\"})}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:\"Frontend:\"}),` Next.js 14, TypeScript, Tailwind CSS, Framer Motion\n`,(0,n.jsx)(e.strong,{children:\"Backend:\"}),` Node.js, Express, Python (FastAPI)\n`,(0,n.jsx)(e.strong,{children:\"ML:\"}),` TensorFlow, scikit-learn, NumPy, Pandas\n`,(0,n.jsx)(e.strong,{children:\"Database:\"}),` PostgreSQL, Redis\n`,(0,n.jsx)(e.strong,{children:\"Search:\"}),` Elasticsearch\n`,(0,n.jsx)(e.strong,{children:\"Payments:\"}),` Stripe\n`,(0,n.jsx)(e.strong,{children:\"Infrastructure:\"}),\" Vercel, AWS (EC2, RDS, S3), CloudFlare\"]}),`\n`,(0,n.jsx)(e.h2,{id:\"challenges-overcome\",children:(0,n.jsx)(e.a,{className:\"anchor\",href:\"#challenges-overcome\",children:\"Challenges Overcome\"})}),`\n`,(0,n.jsx)(e.h3,{id:\"cold-start-problem\",children:(0,n.jsx)(e.a,{className:\"anchor\",href:\"#cold-start-problem\",children:\"Cold Start Problem\"})}),`\n`,(0,n.jsx)(e.p,{children:\"New users had no recommendation history.\"}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.strong,{children:\"Solution:\"})}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsx)(e.li,{children:\"Popularity-based fallback\"}),`\n`,(0,n.jsx)(e.li,{children:\"Category affinity from browsing\"}),`\n`,(0,n.jsx)(e.li,{children:\"Demographic-based defaults\"}),`\n`,(0,n.jsx)(e.li,{children:\"Quick onboarding quiz (optional)\"}),`\n`]}),`\n`,(0,n.jsx)(e.h3,{id:\"model-staleness\",children:(0,n.jsx)(e.a,{className:\"anchor\",href:\"#model-staleness\",children:\"Model Staleness\"})}),`\n`,(0,n.jsx)(e.p,{children:\"Product catalog changed daily; models trained weekly.\"}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.strong,{children:\"Solution:\"})}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsx)(e.li,{children:\"Real-time feature updates in Redis\"}),`\n`,(0,n.jsx)(e.li,{children:\"Hybrid online/offline learning\"}),`\n`,(0,n.jsx)(e.li,{children:\"Boosting for new products\"}),`\n`,(0,n.jsx)(e.li,{children:\"Automatic retraining triggers\"}),`\n`]}),`\n`,(0,n.jsx)(e.h3,{id:\"search-relevance\",children:(0,n.jsx)(e.a,{className:\"anchor\",href:\"#search-relevance\",children:\"Search Relevance\"})}),`\n`,(0,n.jsx)(e.p,{children:\"Generic keyword matching returned poor results.\"}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.strong,{children:\"Solution:\"})}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsx)(e.li,{children:\"Custom scoring with business rules\"}),`\n`,(0,n.jsx)(e.li,{children:\"Query expansion (synonyms, misspellings)\"}),`\n`,(0,n.jsx)(e.li,{children:\"Personalized ranking\"}),`\n`,(0,n.jsx)(e.li,{children:\"Manual tuning for top queries\"}),`\n`]}),`\n`,(0,n.jsx)(e.h2,{id:\"future-enhancements\",children:(0,n.jsx)(e.a,{className:\"anchor\",href:\"#future-enhancements\",children:\"Future Enhancements\"})}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsx)(e.li,{children:\"Visual search (image \\u2192 products)\"}),`\n`,(0,n.jsx)(e.li,{children:\"Voice search integration\"}),`\n`,(0,n.jsx)(e.li,{children:\"Predictive inventory management\"}),`\n`,(0,n.jsx)(e.li,{children:\"Multi-language support\"}),`\n`,(0,n.jsx)(e.li,{children:\"AR try-on for fashion items\"}),`\n`]}),`\n`,(0,n.jsx)(e.hr,{}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:\"Want to explore?\"}),\" Check out the \",(0,n.jsx)(e.a,{href:\"https://shop-demo.example.com\",children:\"live demo\"}),\" or \",(0,n.jsx)(e.a,{href:\"https://github.com/roshankhatri/ecommerce-ai/blob/main/docs/ml-pipeline.md\",children:\"read the ML pipeline docs\"}),\".\"]})]})}function h(r={}){let{wrapper:e}=r.components||{};return e?(0,n.jsx)(e,{...r,children:(0,n.jsx)(d,{...r})}):d(r)}return A(v);})();\n;return Component;"
        },
        "_id": "projects/ecommerce-ai.mdx",
        "_raw": {
          "sourceFilePath": "projects/ecommerce-ai.mdx",
          "sourceFileName": "ecommerce-ai.mdx",
          "sourceFileDir": "projects",
          "contentType": "mdx",
          "flattenedPath": "projects/ecommerce-ai"
        },
        "type": "Project",
        "slug": "ecommerce-ai",
        "readingTime": {
          "text": "4 min read",
          "minutes": 3.17,
          "time": 190200,
          "words": 634
        }
      },
      "documentHash": "1763187508657",
      "hasWarnings": false,
      "documentTypeName": "Project"
    }
  }
}
